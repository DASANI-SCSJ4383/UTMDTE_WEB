/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/eslint-plugin-unicorn@41.0.1/rules/no-for-loop.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";const{isClosingParenToken:isClosingParenToken,getStaticValue:getStaticValue}=require("eslint-utils"),isLiteralValue=require("./utils/is-literal-value.js"),avoidCapture=require("./utils/avoid-capture.js"),getScopes=require("./utils/get-scopes.js"),singular=require("./utils/singular.js"),toLocation=require("./utils/to-location.js"),getReferences=require("./utils/get-references.js"),MESSAGE_ID="no-for-loop",messages={[MESSAGE_ID]:"Use a `for-of` loop instead of this `for` loop."},defaultElementName="element",isLiteralZero=e=>isLiteralValue(e,0),isLiteralOne=e=>isLiteralValue(e,1),isIdentifierWithName=(e,t)=>e&&"Identifier"===e.type&&e.name===t,getIndexIdentifierName=e=>{const{init:t}=e;if(!t||"VariableDeclaration"!==t.type)return;if(1!==t.declarations.length)return;const[r]=t.declarations;var i;if((i=r.init,isLiteralValue(i,0))&&"Identifier"===r.id.type)return r.id.name},getStrictComparisonOperands=e=>"<"===e.operator?{lesser:e.left,greater:e.right}:">"===e.operator?{lesser:e.right,greater:e.left}:void 0,getArrayIdentifierFromBinaryExpression=(e,t)=>{const r=getStrictComparisonOperands(e);if(!r)return;const{lesser:i,greater:n}=r;return isIdentifierWithName(i,t)&&"MemberExpression"===n.type&&"Identifier"===n.object.type&&"Identifier"===n.property.type&&"length"===n.property.name?n.object:void 0},getArrayIdentifier=(e,t)=>{const{test:r}=e;if(r&&"BinaryExpression"===r.type)return getArrayIdentifierFromBinaryExpression(r,t)},isLiteralOnePlusIdentifierWithName=(e,t)=>!(!e||"BinaryExpression"!==e.type||"+"!==e.operator)&&(isIdentifierWithName(e.left,t)&&isLiteralOne(e.right)||isIdentifierWithName(e.right,t)&&isLiteralOne(e.left)),checkUpdateExpression=(e,t)=>{const{update:r}=e;if(!r)return!1;if("UpdateExpression"===r.type)return"++"===r.operator&&isIdentifierWithName(r.argument,t);if("AssignmentExpression"===r.type&&isIdentifierWithName(r.left,t)){if("+="===r.operator)return isLiteralOne(r.right);if("="===r.operator)return i=r.right,n=t,!(!i||"BinaryExpression"!==i.type||"+"!==i.operator)&&(isIdentifierWithName(i.left,n)&&isLiteralOne(i.right)||isIdentifierWithName(i.right,n)&&isLiteralOne(i.left))}var i,n;return!1},isOnlyArrayOfIndexVariableRead=(e,t)=>e.every((e=>{const r=e.identifier.parent;return"MemberExpression"===r.type&&(r.property.name===t&&("AssignmentExpression"!==r.parent.type||r.parent.left!==r))})),getRemovalRange=(e,t)=>{const r=e.parent;if(1===r.declarations.length){const{line:e}=r.loc.start;return t.lines[e-1].trim()===t.getText(r)?[t.getIndexFromLoc({line:e,column:0}),t.getIndexFromLoc({line:e+1,column:0})]:r.range}const i=r.declarations.indexOf(e);return 0===i?[e.range[0],r.declarations[1].range[0]]:[r.declarations[i-1].range[1],e.range[1]]},resolveIdentifierName=(e,t)=>{for(;t;){const r=t.set.get(e);if(r)return r;t=t.upper}},scopeContains=(e,t)=>{for(;t;){if(t===e)return!0;t=t.upper}return!1},nodeContains=(e,t)=>{for(;t;){if(t===e)return!0;t=t.parent}return!1},isIndexVariableUsedElsewhereInTheLoopBody=(e,t,r)=>e.references.filter((e=>scopeContains(t,e.from))).filter((e=>{const t=e.identifier.parent;return"MemberExpression"!==t.type||t.object.name!==r})).length>0,isIndexVariableAssignedToInTheLoopBody=(e,t)=>e.references.filter((e=>scopeContains(t,e.from))).some((e=>e.isWrite())),someVariablesLeakOutOfTheLoop=(e,t,r)=>t.some((t=>!t.references.every((t=>scopeContains(r,t.from)||nodeContains(e,t.identifier))))),getReferencesInChildScopes=(e,t)=>getReferences(e).filter((e=>e.identifier.name===t)),create=e=>{const t=e.getSourceCode(),{scopeManager:r,text:i}=t;return{ForStatement(n){const a=getIndexIdentifierName(n);if(!a)return;const o=getArrayIdentifier(n,a);if(!o)return;const s=o.name,l=e.getScope(),p=getStaticValue(o,l);if(p&&!Array.isArray(p.value))return;if(!checkUpdateExpression(n,a))return;if(!n.body||"BlockStatement"!==n.body.type)return;const f=r.acquire(n),d=r.acquire(n.body);if(!d)return;const c=resolveIdentifierName(a,d);if(isIndexVariableAssignedToInTheLoopBody(c,d))return;const u=getReferencesInChildScopes(d,s);if(0===u.length)return;if(!isOnlyArrayOfIndexVariableRead(u,a))return;const[g]=n.range,[,m]=t.getTokenBefore(n.body,isClosingParenToken).range,y={loc:toLocation([g,m],t),messageId:MESSAGE_ID},h=u.find((e=>"VariableDeclarator"===e.identifier.parent.parent.type)),I=h&&h.identifier.parent.parent,x=I&&I.id.name,b=x&&resolveIdentifierName(x,d);return!someVariablesLeakOutOfTheLoop(n,[c,b].filter(Boolean),f)&&(y.fix=function*(e){const r=isIndexVariableUsedElsewhereInTheLoopBody(c,d,s),o=a,l=x||avoidCapture(singular(s)||"element",getScopes(d)),p=s;let f,g=l,m="const",y=!0;I&&("ObjectPattern"!==I.id.type&&"ArrayPattern"!==I.id.type||(y=1===u.length),y&&(m="VariableDeclarator"===l.type?I.kind:I.parent.kind,I.id.typeAnnotation&&r?(g=i.slice(I.id.range[0],I.id.typeAnnotation.range[0]).trim(),f=t.getText(I.id.typeAnnotation,-1).trim()):g=t.getText(I.id)));const b=[m];r?(b.push(` [${o}, ${g}]`),f&&b.push(`: [number, ${f}]`),b.push(` of ${p}.entries()`)):b.push(` ${g} of ${p}`);const L=b.join("");yield e.replaceTextRange([n.init.range[0],n.update.range[1]],L);for(const t of u)t!==h&&(yield e.replaceText(t.identifier.parent,l));I&&(yield y?e.removeRange(getRemovalRange(I,t)):e.replaceText(I.init,l))}),y}}};module.exports={create:create,meta:{type:"suggestion",docs:{description:"Do not use a `for` loop that can be replaced with a `for-of` loop."},fixable:"code",messages:messages,hasSuggestion:!0}};
//# sourceMappingURL=/sm/0a315876de7ba87f41f575bf17206169a93d5c8bf962f4ea1230b15e6810b694.map