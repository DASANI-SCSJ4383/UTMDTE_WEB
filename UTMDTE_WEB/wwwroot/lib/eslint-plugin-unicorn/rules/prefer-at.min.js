/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/eslint-plugin-unicorn@41.0.1/rules/prefer-at.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";const{isOpeningBracketToken:isOpeningBracketToken,isClosingBracketToken:isClosingBracketToken,getStaticValue:getStaticValue}=require("eslint-utils"),isLiteralValue=require("./utils/is-literal-value.js"),{isParenthesized:isParenthesized,getParenthesizedRange:getParenthesizedRange,getParenthesizedText:getParenthesizedText}=require("./utils/parentheses.js"),{isNodeMatchesNameOrPath:isNodeMatchesNameOrPath}=require("./utils/is-node-matches.js"),needsSemicolon=require("./utils/needs-semicolon.js"),shouldAddParenthesesToMemberExpressionObject=require("./utils/should-add-parentheses-to-member-expression-object.js"),isLeftHandSide=require("./utils/is-left-hand-side.js"),{getNegativeIndexLengthNode:getNegativeIndexLengthNode,removeLengthNode:removeLengthNode}=require("./shared/negative-index.js"),{methodCallSelector:methodCallSelector,callExpressionSelector:callExpressionSelector,notLeftHandSideSelector:notLeftHandSideSelector}=require("./selectors/index.js"),{removeMemberExpressionProperty:removeMemberExpressionProperty,removeMethodCall:removeMethodCall}=require("./fix/index.js"),MESSAGE_ID_NEGATIVE_INDEX="negative-index",MESSAGE_ID_INDEX="index",MESSAGE_ID_STRING_CHAR_AT_NEGATIVE="string-char-at-negative",MESSAGE_ID_STRING_CHAR_AT="string-char-at",MESSAGE_ID_SLICE="slice",MESSAGE_ID_GET_LAST_FUNCTION="get-last-function",SUGGESTION_ID="use-at",messages={"negative-index":"Prefer `.at(…)` over `[….length - index]`.",index:"Prefer `.at(…)` over index access.","string-char-at-negative":"Prefer `String#at(…)` over `String#charAt(….length - index)`.","string-char-at":"Prefer `String#at(…)` over `String#charAt(…)`.",slice:"Prefer `.at(…)` over the first element from `.slice(…)`.","get-last-function":"Prefer `.at(-1)` over `{{description}}(…)` to get the last element.","use-at":"Use `.at(…)`."},indexAccess=["MemberExpression","[optional!=true]","[computed!=false]",notLeftHandSideSelector()].join(""),sliceCall=methodCallSelector({method:"slice",minimumArguments:1,maximumArguments:2}),stringCharAt=methodCallSelector({method:"charAt",argumentsLength:1}),isArguments=e=>"Identifier"===e.type&&"arguments"===e.name,isLiteralNegativeInteger=e=>"UnaryExpression"===e.type&&e.prefix&&"-"===e.operator&&"Literal"===e.argument.type&&Number.isInteger(e.argument.value)&&e.argument.value>0,isZeroIndexAccess=e=>{const{parent:t}=e;return"MemberExpression"===t.type&&!t.optional&&t.computed&&t.object===e&&isLiteralValue(t.property,0)},isArrayPopOrShiftCall=(e,t)=>{const{parent:r}=e;return"MemberExpression"===r.type&&!r.optional&&!r.computed&&r.object===e&&"Identifier"===r.property.type&&r.property.name===t&&"CallExpression"===r.parent.type&&r.parent.callee===r&&!r.parent.optional&&0===r.parent.arguments.length},isArrayPopCall=e=>isArrayPopOrShiftCall(e,"pop"),isArrayShiftCall=e=>isArrayPopOrShiftCall(e,"shift");function checkSliceCall(e){const t=e.arguments.length,[r,s]=e.arguments;if(!isLiteralNegativeInteger(r))return;let n="";if(isZeroIndexAccess(e)){if(isLeftHandSide(e.parent))return;n="zero-index"}else isArrayShiftCall(e)?n="shift":isArrayPopCall(e)&&(n="pop");if(!n)return;const i=-r.argument.value;return 1===t?"zero-index"===n||"shift"===n||-1===i&&"pop"===n?{safeToFix:!0,firstElementGetMethod:n}:void 0:isLiteralNegativeInteger(s)&&-s.argument.value===i+1?{safeToFix:!0,firstElementGetMethod:n}:"pop"!==n?{safeToFix:!1,firstElementGetMethod:n}:void 0}const lodashLastFunctions=["_.last","lodash.last","underscore.last"];function create(e){const{getLastElementFunctions:t,checkAllIndexAccess:r}={getLastElementFunctions:[],checkAllIndexAccess:!1,...e.options[0]},s=[...t,...lodashLastFunctions],n=e.getSourceCode();return{[indexAccess](t){const s=t.property,i=getNegativeIndexLengthNode(s,t.object);if(!i){if(!r)return;const t=getStaticValue(s,e.getScope());if(!t||!Number.isInteger(t.value)||t.value<0)return}const a={node:s,messageId:i?"negative-index":"index"};return isArguments(t.object)||(a.fix=function*(e){i&&(yield removeLengthNode(i,e,n));const t=n.getTokenBefore(s,isOpeningBracketToken);yield e.replaceText(t,".at(");const r=n.getTokenAfter(s,isClosingBracketToken);yield e.replaceText(r,")")}),a},[stringCharAt](e){const[t]=e.arguments,s=getNegativeIndexLengthNode(t,e.callee.object);if(s||r)return{node:t,messageId:s?"string-char-at-negative":"string-char-at",suggest:[{messageId:"use-at",*fix(t){s&&(yield removeLengthNode(s,t,n)),yield t.replaceText(e.callee.property,"at")}}]}},[sliceCall](e){const t=checkSliceCall(e);if(!t)return;const{safeToFix:r,firstElementGetMethod:s}=t;function*i(t){if(yield t.replaceText(e.callee.property,"at"),1!==e.arguments.length){const[,r]=getParenthesizedRange(e.arguments[0],n),[s]=n.getLastToken(e).range;yield t.removeRange([r,s])}"zero-index"===s?yield removeMemberExpressionProperty(t,e.parent,n):yield*removeMethodCall(t,e.parent.parent,n)}const a={node:e.callee.property,messageId:"slice"};return r?a.fix=i:a.suggest=[{messageId:"use-at",fix:i}],a},[callExpressionSelector({argumentsLength:1})](e){const t=s.find((t=>isNodeMatchesNameOrPath(e.callee,t)));if(!t)return;const r={node:e.callee,messageId:"get-last-function",data:{description:t.trim()}},[i]=e.arguments;return isArguments(i)||(r.fix=function(t){let r=getParenthesizedText(i,n);!isParenthesized(i,n)&&shouldAddParenthesesToMemberExpressionObject(i,n)&&(r=`(${r})`),r=`${r}.at(-1)`;const s=n.getTokenBefore(e);return needsSemicolon(s,n,r)&&(r=`;${r}`),t.replaceText(e,r)}),r}}}const schema=[{type:"object",additionalProperties:!1,properties:{getLastElementFunctions:{type:"array",uniqueItems:!0},checkAllIndexAccess:{type:"boolean",default:!1}}}];module.exports={create:create,meta:{type:"suggestion",docs:{description:"Prefer `.at()` method for index access and `String#charAt()`."},fixable:"code",hasSuggestions:!0,schema:schema,messages:messages}};
//# sourceMappingURL=/sm/be14e816827e66a3b92034463d1ed24adaa08cf2808c5e25fdfc13e1b3512f22.map