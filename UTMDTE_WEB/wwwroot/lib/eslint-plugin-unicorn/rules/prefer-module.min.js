/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/eslint-plugin-unicorn@41.0.1/rules/prefer-module.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";const{isOpeningParenToken:isOpeningParenToken}=require("eslint-utils"),isShadowed=require("./utils/is-shadowed.js"),isStaticRequire=require("./utils/is-static-require.js"),assertToken=require("./utils/assert-token.js"),{referenceIdentifierSelector:referenceIdentifierSelector}=require("./selectors/index.js"),{removeParentheses:removeParentheses,replaceReferenceIdentifier:replaceReferenceIdentifier,removeSpacesAfter:removeSpacesAfter}=require("./fix/index.js"),ERROR_USE_STRICT_DIRECTIVE="error/use-strict-directive",ERROR_GLOBAL_RETURN="error/global-return",ERROR_IDENTIFIER="error/identifier",SUGGESTION_USE_STRICT_DIRECTIVE="suggestion/use-strict-directive",SUGGESTION_DIRNAME="suggestion/dirname",SUGGESTION_FILENAME="suggestion/filename",SUGGESTION_IMPORT="suggestion/import",SUGGESTION_EXPORT="suggestion/export",messages={[ERROR_USE_STRICT_DIRECTIVE]:'Do not use "use strict" directive.',[ERROR_GLOBAL_RETURN]:'"return" should be used inside a function.',[ERROR_IDENTIFIER]:'Do not use "{{name}}".',[SUGGESTION_USE_STRICT_DIRECTIVE]:'Remove "use strict" directive.',[SUGGESTION_DIRNAME]:'Replace "__dirname" with `"…(import.meta.url)"`.',[SUGGESTION_FILENAME]:'Replace "__filename" with `"…(import.meta.url)"`.',[SUGGESTION_IMPORT]:"Switch to `import`.",[SUGGESTION_EXPORT]:"Switch to `export`."},identifierSelector=referenceIdentifierSelector(["exports","require","module","__filename","__dirname"]);function fixRequireCall(e,t){if(!isStaticRequire(e.parent)||e.parent.callee!==e)return;const r=e.parent,{parent:n,callee:i,arguments:[o]}=r;if("ExpressionStatement"===n.type&&"Program"===n.parent.type)return function*(e){yield e.replaceText(i,"import");const n=t.getTokenAfter(i,isOpeningParenToken);yield e.replaceText(n," ");const s=t.getLastToken(r);yield e.remove(s);for(const n of[i,r,o])yield*removeParentheses(n,e,t)};if("VariableDeclarator"===n.type&&n.init===r&&("Identifier"===n.id.type||"ObjectPattern"===n.id.type&&n.id.properties.every((({type:e,key:t,value:r,computed:n})=>"Property"===e&&!n&&"Identifier"===r.type&&"Identifier"===t.type)))&&"VariableDeclaration"===n.parent.type&&"const"===n.parent.kind&&1===n.parent.declarations.length&&n.parent.declarations[0]===n&&"Program"===n.parent.parent.type){const e=n,s=e.parent,{id:a}=e;return function*(e){const n=t.getFirstToken(s);assertToken(n,{expected:{type:"Keyword",value:"const"},ruleId:"prefer-module"}),yield e.replaceText(n,"import");const p=t.getTokenAfter(a);assertToken(p,{expected:{type:"Punctuator",value:"="},ruleId:"prefer-module"}),yield removeSpacesAfter(a,t,e),yield removeSpacesAfter(p,t,e),yield e.replaceText(p," from "),yield e.remove(i);const c=t.getTokenAfter(i,isOpeningParenToken);yield e.remove(c);const d=t.getLastToken(r);yield e.remove(d);for(const n of[i,r,o])yield*removeParentheses(n,e,t);if("Identifier"===a.type)return;const{properties:u}=a;for(const r of u){const{key:n,shorthand:i}=r;if(!i){const r=t.getTokenAfter(n);assertToken(r,{expected:{type:"Punctuator",value:":"},ruleId:"prefer-module"}),yield removeSpacesAfter(n,t,e),yield removeSpacesAfter(r,t,e),yield e.replaceText(r," as ")}}}}}const isTopLevelAssignment=e=>"AssignmentExpression"===e.parent.type&&"="===e.parent.operator&&e.parent.left===e&&"ExpressionStatement"===e.parent.parent.type&&"Program"===e.parent.parent.parent.type,isNamedExport=e=>"MemberExpression"===e.parent.type&&!e.parent.optional&&!e.parent.computed&&e.parent.object===e&&"Identifier"===e.parent.property.type&&isTopLevelAssignment(e.parent)&&"Identifier"===e.parent.parent.right.type,isModuleExports=e=>"MemberExpression"===e.parent.type&&!e.parent.optional&&!e.parent.computed&&e.parent.object===e&&"Identifier"===e.parent.property.type&&"exports"===e.parent.property.name;function fixDefaultExport(e,t){return function*(r){yield r.replaceText(e,"export default "),yield removeSpacesAfter(e,t,r);const n=t.getTokenAfter(e,(e=>"Punctuator"===e.type&&"="===e.value));yield r.remove(n),yield removeSpacesAfter(n,t,r);for(const n of[e.parent,e])yield*removeParentheses(n,r,t)}}function fixNamedExport(e,t){return function*(r){const n=e.parent.parent,i=e.parent.property.name,o=n.right.name;yield r.replaceText(n,`export {${o} as ${i}}`),yield*removeParentheses(n,r,t)}}function fixExports(e,t){return isTopLevelAssignment(e)?fixDefaultExport(e,t):isNamedExport(e)?fixNamedExport(e,t):void 0}function fixModuleExports(e,t){if(isModuleExports(e))return fixExports(e.parent,t)}function create(e){const t=e.getFilename().toLowerCase();if(t.endsWith(".cjs"))return{};const r=e.getSourceCode();return{'ExpressionStatement[directive="use strict"]'(e){const n={node:e,messageId:ERROR_USE_STRICT_DIRECTIVE},i=function*(t){yield t.remove(e),yield removeSpacesAfter(e,r,t)};return t.endsWith(".mjs")?n.fix=i:n.suggest=[{messageId:SUGGESTION_USE_STRICT_DIRECTIVE,fix:i}],n},"ReturnStatement:not(:function ReturnStatement)":e=>({node:r.getFirstToken(e),messageId:ERROR_GLOBAL_RETURN}),[identifierSelector](t){if(isShadowed(e.getScope(),t))return;const{name:n}=t,i={node:t,messageId:ERROR_IDENTIFIER,data:{name:n}};switch(n){case"__filename":case"__dirname":{const e="__dirname"===t.name?SUGGESTION_DIRNAME:SUGGESTION_FILENAME,r="__dirname"===t.name?"path.dirname(url.fileURLToPath(import.meta.url))":"url.fileURLToPath(import.meta.url)";return i.suggest=[{messageId:e,fix:e=>replaceReferenceIdentifier(t,r,e)}],i}case"require":{const e=fixRequireCall(t,r);if(e)return i.suggest=[{messageId:SUGGESTION_IMPORT,fix:e}],i;break}case"exports":{const e=fixExports(t,r);if(e)return i.suggest=[{messageId:SUGGESTION_EXPORT,fix:e}],i;break}case"module":{const e=fixModuleExports(t,r);if(e)return i.suggest=[{messageId:SUGGESTION_EXPORT,fix:e}],i;break}}return i}}}module.exports={create:create,meta:{type:"suggestion",docs:{description:"Prefer JavaScript modules (ESM) over CommonJS."},fixable:"code",hasSuggestions:!0,messages:messages}};
//# sourceMappingURL=/sm/31761d26816c167920d09d65c923bd4290f75fd8079fe3e15c42c66b0675ce64.map