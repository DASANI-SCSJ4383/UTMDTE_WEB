/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/eslint-plugin-unicorn@41.0.1/rules/prefer-json-parse-buffer.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";const{findVariable:findVariable,getStaticValue:getStaticValue,getPropertyName:getPropertyName}=require("eslint-utils"),{methodCallSelector:methodCallSelector}=require("./selectors/index.js"),{removeArgument:removeArgument}=require("./fix/index.js"),MESSAGE_ID="prefer-json-parse-buffer",messages={[MESSAGE_ID]:"Prefer reading the JSON file as a buffer."},jsonParseArgumentSelector=[methodCallSelector({object:"JSON",method:"parse",argumentsLength:1})," > .arguments:first-child"].join(""),getAwaitExpressionArgument=e=>{for(;"AwaitExpression"===e.type;)e=e.argument;return e};function getIdentifierDeclaration(e,t){if(!e)return;if(!(e=getAwaitExpressionArgument(e))||"Identifier"!==e.type)return e;const r=findVariable(t,e);if(!r)return;const{identifiers:n,references:i}=r;if(1!==n.length||2!==i.length)return;const[o]=n;return"VariableDeclarator"===o.parent.type&&o.parent.id===o?getIdentifierDeclaration(o.parent.init,r.scope):void 0}const isUtf8EncodingStringNode=(e,t)=>{const r=getStaticValue(e,t);return r&&isUtf8EncodingString(r.value)},isUtf8EncodingString=e=>"string"==typeof e&&("utf8"===(e=e.toLowerCase())||"utf-8"===e);function isUtf8Encoding(e,t){if("ObjectExpression"===e.type&&1===e.properties.length&&"Property"===e.properties[0].type&&"encoding"===getPropertyName(e.properties[0],t)&&isUtf8EncodingStringNode(e.properties[0].value,t))return!0;if(isUtf8EncodingStringNode(e,t))return!0;const r=getStaticValue(e,t);if(!r)return!1;const{value:n}=r;return!("object"!=typeof n||1!==Object.keys(n).length||!isUtf8EncodingString(n.encoding))}const create=e=>({[jsonParseArgumentSelector](t){const r=e.getScope();if(!(t=getIdentifierDeclaration(t,r))||"CallExpression"!==t.type||t.optional||2!==t.arguments.length||t.arguments.some((e=>"SpreadElement"===e.type))||"MemberExpression"!==t.callee.type||t.callee.optional)return;const n=getPropertyName(t.callee,r);if("readFile"!==n&&"readFileSync"!==n)return;const[,i]=t.arguments;return isUtf8Encoding(i,r)?{node:i,messageId:MESSAGE_ID,fix:t=>removeArgument(t,i,e.getSourceCode())}:void 0}});module.exports={create:create,meta:{type:"suggestion",docs:{description:"Prefer reading a JSON file as a buffer."},fixable:"code",messages:messages}};
//# sourceMappingURL=/sm/e0d3889ce6d13cea8c8f655281a2d35652b43219152fc638ea797d080b747a34.map