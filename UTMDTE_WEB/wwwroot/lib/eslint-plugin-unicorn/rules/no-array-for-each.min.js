/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/eslint-plugin-unicorn@41.0.1/rules/no-array-for-each.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";const{isParenthesized:isParenthesized,isArrowToken:isArrowToken,isCommaToken:isCommaToken,isSemicolonToken:isSemicolonToken,isClosingParenToken:isClosingParenToken,findVariable:findVariable}=require("eslint-utils"),{methodCallSelector:methodCallSelector,referenceIdentifierSelector:referenceIdentifierSelector}=require("./selectors/index.js"),{extendFixRange:extendFixRange}=require("./fix/index.js"),needsSemicolon=require("./utils/needs-semicolon.js"),shouldAddParenthesesToExpressionStatementExpression=require("./utils/should-add-parentheses-to-expression-statement-expression.js"),{getParentheses:getParentheses}=require("./utils/parentheses.js"),isFunctionSelfUsedInside=require("./utils/is-function-self-used-inside.js"),{isNodeMatches:isNodeMatches}=require("./utils/is-node-matches.js"),assertToken=require("./utils/assert-token.js"),{fixSpaceAroundKeyword:fixSpaceAroundKeyword}=require("./fix/index.js"),MESSAGE_ID="no-array-for-each",messages={[MESSAGE_ID]:"Use `for…of` instead of `Array#forEach(…)`."},arrayForEachCallSelector=methodCallSelector({method:"forEach",includeOptionalCall:!0,includeOptionalMember:!0}),continueAbleNodeTypes=new Set(["WhileStatement","DoWhileStatement","ForStatement","ForOfStatement","ForInStatement"]);function isReturnStatementInContinueAbleNodes(e,t){for(let n=e;n&&n!==t;n=n.parent)if(continueAbleNodeTypes.has(n.type))return!0;return!1}function shouldSwitchReturnStatementToBlockStatement(e){const{parent:t}=e;switch(t.type){case"IfStatement":return t.consequent===e||t.alternate===e;case"WithStatement":return t.body===e;default:return!1}}function getFixFunction(e,t,n){const r=n.getSourceCode(),[o]=e.arguments,s=o.params,i=e.callee.object,{returnStatements:a}=t.get(o);function*c(e,t){const n=r.getFirstToken(e);if(assertToken(n,{expected:"return",ruleId:"no-array-for-each"}),!e.argument)return void(yield t.replaceText(n,"continue"));yield t.remove(n);const o=r.getTokenBefore(n),s=r.getTokenAfter(n);let i="",a="";const c=!isParenthesized(e.argument,r)&&shouldAddParenthesesToExpressionStatementExpression(e.argument);c&&(i=`(${i}`,a=`${a})`);const l=shouldSwitchReturnStatementToBlockStatement(e);l?i=`{ ${i}`:needsSemicolon(o,r,c?"(":s.value)&&(i=`;${i}`),i&&(yield t.insertTextBefore(s,i)),a&&(yield t.insertTextAfter(e.argument,a));isSemicolonToken(r.getLastToken(e))||(yield t.insertTextAfter(e,";")),yield t.insertTextAfter(e," continue;"),l&&(yield t.insertTextAfter(e," }"))}return function*(t){yield t.replaceTextRange((()=>{const[t]=e.range;let n;n="BlockStatement"===o.body.type?o.body.range[0]:r.getTokenBefore(o.body,isArrowToken).range[1];return[t,n]})(),(()=>{const[e,t]=s.map((e=>r.getText(e))),a=2===s.length;let c="for (";c+=isFunctionParameterVariableReassigned(o,n)?"let":"const",c+=" ",c+=a?`[${t}, ${e}]`:e,c+=" of ";let l=r.getText(i);return isParenthesized(i,r)&&(l=`(${l})`),c+=l,a&&(c+=".entries()"),c+=") ",c})()),yield*function*(e){const t=getParentheses(o,r).filter((e=>isClosingParenToken(e)));for(const n of t)yield e.remove(n)}(t);const[l,u]=r.getLastTokens(e,2);isCommaToken(l)&&(yield t.remove(l)),yield t.remove(u);for(const e of a)yield*c(e,t);const d=r.getLastToken(e.parent);isSemicolonToken(d)&&"BlockStatement"===o.body.type&&(yield t.remove(d,t)),yield*fixSpaceAroundKeyword(t,e.parent,r),yield*extendFixRange(t,e.parent.range)}}const isChildScope=(e,t)=>{for(let n=e;n;n=n.upper)if(n===t)return!0;return!1};function isFunctionParametersSafeToFix(e,{context:t,scope:n,array:r,allIdentifiers:o}){const s=t.getDeclaredVariables(e);for(const e of s){if(1!==e.defs.length)return!1;const[t]=e.defs;if("Parameter"!==t.type)continue;const s=t.name.name,[i,a]=r.range;for(const e of o){const{name:t,range:[r,o]}=e;if(t!==s||r<i||o>a)continue;const c=findVariable(n,e);if(!c||c.scope===n||isChildScope(n,c.scope))return!1}}return!0}function isFunctionParameterVariableReassigned(e,t){return t.getDeclaredVariables(e).filter((e=>"Parameter"===e.defs[0].type)).some((e=>{const{references:t}=e;return t.some((e=>{const t=e.identifier,{parent:n}=t;return"UpdateExpression"===n.type||"AssignmentExpression"===n.type&&n.left===t}))}))}function isFixable(e,{scope:t,functionInfo:n,allIdentifiers:r,context:o}){const s=o.getSourceCode();if(e.optional||isParenthesized(e,s)||1!==e.arguments.length)return!1;if("ExpressionStatement"!==e.parent.type)return!1;if(e.callee.optional)return!1;const[i]=e.arguments;if("FunctionExpression"!==i.type&&"ArrowFunctionExpression"!==i.type||i.async||i.generator)return!1;const a=i.params;if(1!==a.length&&2!==a.length||a.some((({type:e,typeAnnotation:t})=>"RestElement"===e||t))||!isFunctionParametersSafeToFix(i,{scope:t,array:e,allIdentifiers:r,context:o}))return!1;const{returnStatements:c,scope:l}=n.get(i);return!c.some((e=>isReturnStatementInContinueAbleNodes(e,i)))&&!isFunctionSelfUsedInside(i,l)}const ignoredObjects=["React.Children","Children","R","pIteration"],create=e=>{const t=[],n=[],r=[],o=new Map;return{":function"(n){t.push(n),o.set(n,{returnStatements:[],scope:e.getScope()})},":function:exit"(){t.pop()},[referenceIdentifierSelector()](e){r.push(e)},":function ReturnStatement"(e){const n=t[t.length-1],{returnStatements:r}=o.get(n);r.push(e)},[arrayForEachCallSelector](t){isNodeMatches(t.callee.object,ignoredObjects)||n.push({node:t,scope:e.getScope()})},*"Program:exit"(){for(const{node:t,scope:s}of n){const n={node:t.callee.property,messageId:MESSAGE_ID};isFixable(t,{scope:s,allIdentifiers:r,functionInfo:o,context:e})&&(n.fix=getFixFunction(t,o,e)),yield n}}}};module.exports={create:create,meta:{type:"suggestion",docs:{description:"Prefer `for…of` over `Array#forEach(…)`."},fixable:"code",messages:messages}};
//# sourceMappingURL=/sm/abb933ca55cf0fadd1512f6246f338c13b72ac5527caca7b6ac7c027c27a7ce6.map