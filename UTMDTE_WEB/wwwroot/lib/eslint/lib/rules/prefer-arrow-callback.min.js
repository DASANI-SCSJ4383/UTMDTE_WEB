/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/eslint@8.11.0/lib/rules/prefer-arrow-callback.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";const astUtils=require("./utils/ast-utils");function isFunctionName(e){return e&&"FunctionName"===e.defs[0].type}function checkMetaProperty(e,t,n){return e.meta.name===t&&e.property.name===n}function getVariableOfArguments(e){const t=e.variables;for(let e=0;e<t.length;++e){const n=t[e];if("arguments"===n.name)return 0===n.identifiers.length?n:null}return null}function getCallbackInfo(e){const t={isCallback:!1,isLexicalThis:!1};let n=e,r=e.parent,s=!1;for(;n;){switch(r.type){case"LogicalExpression":case"ChainExpression":case"ConditionalExpression":break;case"MemberExpression":if(r.object!==n||r.property.computed||"Identifier"!==r.property.type||"bind"!==r.property.name)return t;{const e="ChainExpression"===r.parent.type?r.parent:r;if(!astUtils.isCallee(e))return t;s||(s=!0,t.isLexicalThis=1===e.parent.arguments.length&&"ThisExpression"===e.parent.arguments[0].type),r=e.parent}break;case"CallExpression":case"NewExpression":return r.callee!==n&&(t.isCallback=!0),t;default:return t}n=r,r=r.parent}throw new Error("unreachable")}function hasDuplicateParams(e){return e.every((e=>"Identifier"===e.type))&&e.length!==new Set(e.map((e=>e.name))).size}module.exports={meta:{type:"suggestion",docs:{description:"require using arrow functions for callbacks",recommended:!1,url:"https://eslint.org/docs/rules/prefer-arrow-callback"},schema:[{type:"object",properties:{allowNamedFunctions:{type:"boolean",default:!1},allowUnboundThis:{type:"boolean",default:!0}},additionalProperties:!1}],fixable:"code",messages:{preferArrowCallback:"Unexpected function expression."}},create(e){const t=e.options[0]||{},n=!1!==t.allowUnboundThis,r=t.allowNamedFunctions,s=e.getSourceCode();let i=[];function a(){i.push({this:!1,super:!1,meta:!1})}function o(){return i.pop()}return{Program(){i=[]},ThisExpression(){const e=i[i.length-1];e&&(e.this=!0)},Super(){const e=i[i.length-1];e&&(e.super=!0)},MetaProperty(e){const t=i[i.length-1];t&&checkMetaProperty(e,"new","target")&&(t.meta=!0)},FunctionDeclaration:a,"FunctionDeclaration:exit":o,FunctionExpression:a,"FunctionExpression:exit"(t){const i=o();if(r&&t.id&&t.id.name)return;if(t.generator)return;const a=e.getDeclaredVariables(t)[0];if(isFunctionName(a)&&a.references.length>0)return;const l=getVariableOfArguments(e.getScope());if(l&&l.references.length>0)return;const c=getCallbackInfo(t);!c.isCallback||n&&i.this&&!c.isLexicalThis||i.super||i.meta||e.report({node:t,messageId:"preferArrowCallback",*fix(e){if(!c.isLexicalThis&&i.this||hasDuplicateParams(t.params))return;if(c.isLexicalThis){const n=t.parent;if("MemberExpression"!==n.type)return;const r=n.parent,i=s.getTokenAfter(n.object,astUtils.isNotClosingParenToken),a=s.getLastToken(r);if(astUtils.isParenthesised(s,n))return;if(s.commentsExistBetween(i,a))return;yield e.removeRange([i.range[0],a.range[1]])}const n=s.getFirstToken(t,t.async?1:0),r=s.getTokenAfter(n,astUtils.isOpeningParenToken);s.commentsExistBetween(n,r)?(yield e.remove(n),t.id&&(yield e.remove(t.id))):yield e.removeRange([n.range[0],r.range[0]]),yield e.insertTextBefore(t.body,"=> ");let a=c.isLexicalThis?t.parent.parent:t;"ChainExpression"===a.type&&(a=a.parent),"CallExpression"===a.parent.type||"ConditionalExpression"===a.parent.type||astUtils.isParenthesised(s,a)||astUtils.isParenthesised(s,t)||(yield e.insertTextBefore(a,"("),yield e.insertTextAfter(a,")"))}})}}}};
//# sourceMappingURL=/sm/01b11c3b9715593456e5a4f11b534de55b234a2a079f816d5583c3a079a1522c.map