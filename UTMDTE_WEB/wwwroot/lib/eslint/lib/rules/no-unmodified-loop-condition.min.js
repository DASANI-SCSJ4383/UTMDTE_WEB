/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/eslint@8.11.0/lib/rules/no-unmodified-loop-condition.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";const Traverser=require("../shared/traverser"),astUtils=require("./utils/ast-utils"),SENTINEL_PATTERN=/(?:(?:Call|Class|Function|Member|New|Yield)Expression|Statement|Declaration)$/u,LOOP_PATTERN=/^(?:DoWhile|For|While)Statement$/u,GROUP_PATTERN=/^(?:BinaryExpression|ConditionalExpression)$/u,SKIP_PATTERN=/^(?:ArrowFunction|Class|Function)Expression$/u,DYNAMIC_PATTERN=/^(?:Call|Member|New|TaggedTemplate|Yield)Expression$/u;function isWriteReference(e){if(e.init){const t=e.resolved&&e.resolved.defs[0];if(!t||"Variable"!==t.type||"var"!==t.parent.kind)return!1}return e.isWrite()}function isUnmodified(e){return!e.modified}function isUnmodifiedAndNotBelongToGroup(e){return!(e.modified||e.group)}function isInRange(e,t){const n=e.range,i=t.identifier.range;return n[0]<=i[0]&&i[1]<=n[1]}const isInLoop={WhileStatement:isInRange,DoWhileStatement:isInRange,ForStatement:(e,t)=>isInRange(e,t)&&!(e.init&&isInRange(e.init,t))};function getEncloseFunctionDeclaration(e){let t=e.identifier;for(;t;){if("FunctionDeclaration"===t.type)return t.id?t:null;t=t.parent}return null}function updateModifiedFlag(e,t){for(let n=0;n<e.length;++n){const i=e[n];for(let e=0;!i.modified&&e<t.length;++e){const n=t[e];let o,r;const s=i.isInLoop(n)||Boolean((o=getEncloseFunctionDeclaration(n))&&(r=astUtils.getVariableByName(n.from.upper,o.id.name))&&r.references.some(i.isInLoop));i.modified=s}}}module.exports={meta:{type:"problem",docs:{description:"disallow unmodified loop conditions",recommended:!1,url:"https://eslint.org/docs/rules/no-unmodified-loop-condition"},schema:[],messages:{loopConditionNotModified:"'{{name}}' is not modified in this loop."}},create(e){const t=e.getSourceCode();let n=null;function i(t){const n=t.reference.identifier;e.report({node:n,messageId:"loopConditionNotModified",data:n})}function o(e){e.every(isUnmodified)&&e.forEach(i)}function r(e){let n=!1;return Traverser.traverse(e,{visitorKeys:t.visitorKeys,enter(e){DYNAMIC_PATTERN.test(e.type)?(n=!0,this.break()):SKIP_PATTERN.test(e.type)&&this.skip()}}),n}function s(e){if(e.init)return null;let t=null,n=e.identifier,i=n.parent;for(;i;){if(SENTINEL_PATTERN.test(i.type)){if(LOOP_PATTERN.test(i.type)&&i.test===n)return{reference:e,group:t,isInLoop:isInLoop[i.type].bind(null,i),modified:!1};break}if(GROUP_PATTERN.test(i.type)){if(r(i))break;t=i}n=i,i=i.parent}return null}function l(e){const t=e.references.map(s).filter(Boolean);if(0===t.length)return;!function(e){for(let t=0;t<e.length;++t){const i=e[t];if(i.group){let e=n.get(i.group);e||(e=[],n.set(i.group,e)),e.push(i)}}}(t);const o=e.references.filter(isWriteReference);o.length>0&&updateModifiedFlag(t,o),t.filter(isUnmodifiedAndNotBelongToGroup).forEach(i)}return{"Program:exit"(){const t=[e.getScope()];let i;for(n=new Map;i=t.pop();)t.push(...i.childScopes),i.variables.forEach(l);n.forEach(o),n=null}}}};
//# sourceMappingURL=/sm/d154337fa67ed0f8894bafe7d9b7b1452eb51ffcc9ff593439c6d005b4bbbf9a.map