/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/eslint@8.11.0/lib/rules/one-var.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";const astUtils=require("./utils/ast-utils");function isInStatementList(i){return astUtils.STATEMENT_LIST_PARENTS.has(i.parent.type)}module.exports={meta:{type:"suggestion",docs:{description:"enforce variables to be declared either together or separately in functions",recommended:!1,url:"https://eslint.org/docs/rules/one-var"},fixable:"code",schema:[{oneOf:[{enum:["always","never","consecutive"]},{type:"object",properties:{separateRequires:{type:"boolean"},var:{enum:["always","never","consecutive"]},let:{enum:["always","never","consecutive"]},const:{enum:["always","never","consecutive"]}},additionalProperties:!1},{type:"object",properties:{initialized:{enum:["always","never","consecutive"]},uninitialized:{enum:["always","never","consecutive"]}},additionalProperties:!1}]}],messages:{combineUninitialized:"Combine this with the previous '{{type}}' statement with uninitialized variables.",combineInitialized:"Combine this with the previous '{{type}}' statement with initialized variables.",splitUninitialized:"Split uninitialized '{{type}}' declarations into multiple statements.",splitInitialized:"Split initialized '{{type}}' declarations into multiple statements.",splitRequires:"Split requires to be separated into a single block.",combine:"Combine this with the previous '{{type}}' statement.",split:"Split '{{type}}' declarations into multiple statements."}},create(i){const e="always",t="never",n="consecutive",a=i.options[0]||e,l={};"string"==typeof a?(l.var={uninitialized:a,initialized:a},l.let={uninitialized:a,initialized:a},l.const={uninitialized:a,initialized:a}):"object"==typeof a&&(l.separateRequires=!!a.separateRequires,l.var={uninitialized:a.var,initialized:a.var},l.let={uninitialized:a.let,initialized:a.let},l.const={uninitialized:a.const,initialized:a.const},Object.prototype.hasOwnProperty.call(a,"uninitialized")&&(l.var.uninitialized=a.uninitialized,l.let.uninitialized=a.uninitialized,l.const.uninitialized=a.uninitialized),Object.prototype.hasOwnProperty.call(a,"initialized")&&(l.var.initialized=a.initialized,l.let.initialized=a.initialized,l.const.initialized=a.initialized));const r=i.getSourceCode(),o=[],s=[];function d(){s.push({let:{initialized:!1,uninitialized:!1},const:{initialized:!1,uninitialized:!1}})}function u(){o.push({initialized:!1,uninitialized:!1}),d()}function c(){s.pop()}function p(){o.pop(),c()}function z(i){return i.init&&"CallExpression"===i.init.type&&"require"===i.init.callee.name}function m(i){const e={uninitialized:0,initialized:0};for(let t=0;t<i.length;t++)null===i[t].init?e.uninitialized++:e.initialized++;return e}function f(i,t){const n=m(t),a=l[i]||{},r=function(i){let e;return"var"===i?e=o[o.length-1]:"let"===i?e=s[s.length-1].let:"const"===i&&(e=s[s.length-1].const),e}(i),d=t.some(z);return!(a.uninitialized===e&&a.initialized===e&&(r.uninitialized||r.initialized)&&!d)&&(!(n.uninitialized>0&&a.uninitialized===e&&r.uninitialized)&&(!(n.initialized>0&&a.initialized===e&&r.initialized&&!d)&&((!r.required||!d)&&(function(i,t,n){for(let a=0;a<t.length;a++)null===t[a].init?l[i]&&l[i].uninitialized===e&&(n.uninitialized=!0):l[i]&&l[i].initialized===e&&(l.separateRequires&&z(t[a])?n.required=!0:n.initialized=!0)}(i,t,r),!0))))}function y(i){const e=i[0],t=Array.isArray(e.parent.parent.body)?e.parent.parent.body:[],n=t.findIndex((i=>i.range[0]===e.parent.range[0])),a=t[n-1];return i=>{const t=r.getTokenBefore(e),n=r.getTokenBefore(t),l=[];return a&&a.kind===r.getText(t)&&(";"===n.value?l.push(i.replaceText(n,",")):l.push(i.insertTextAfter(n,",")),l.push(i.replaceText(t,""))),l}}function g(i){const{parent:e}=i;return isInStatementList("ExportNamedDeclaration"===e.type?e:i)?e=>i.declarations.map((t=>{const n=r.getTokenAfter(t);if(null===n)return null;const a=r.getTokenAfter(n,{includeComments:!0});if(","!==n.value)return null;const l="ExportNamedDeclaration"===i.parent.type?"export ":"";if(a.range[0]===n.range[1])return e.replaceText(n,`; ${l}${i.kind} `);if(a.loc.start.line>n.loc.end.line||"Line"===a.type||"Block"===a.type){let t=a;for(;"Line"===t.type||"Block"===t.type;)t=r.getTokenAfter(t,{includeComments:!0});return e.replaceTextRange([n.range[0],t.range[0]],`;${r.text.slice(n.range[1],t.range[0])}${l}${i.kind} `)}return e.replaceText(n,`; ${l}${i.kind}`)})).filter((i=>i)):null}return{Program:u,FunctionDeclaration:u,FunctionExpression:u,ArrowFunctionExpression:u,StaticBlock:u,BlockStatement:d,ForStatement:d,ForInStatement:d,ForOfStatement:d,SwitchStatement:d,VariableDeclaration:function(a){const r=a.parent,o=a.kind;if(!l[o])return;const s=a.declarations,d=m(s),u=s.some(z)&&!s.every(z);l[o].initialized===e&&l.separateRequires&&u&&i.report({node:a,messageId:"splitRequires"});const c=r.body&&r.body.length>0&&r.body.indexOf(a)||0;if(c>0){const e=r.body[c-1],t="VariableDeclaration"===e.type,u=s.concat(e.declarations||[]);if(t&&e.kind===o&&(!u.some(z)||u.every(z))){const t=m(e.declarations);l[o].initialized===n&&l[o].uninitialized===n?i.report({node:a,messageId:"combine",data:{type:o},fix:y(s)}):l[o].initialized===n&&d.initialized>0&&t.initialized>0?i.report({node:a,messageId:"combineInitialized",data:{type:o},fix:y(s)}):l[o].uninitialized===n&&d.uninitialized>0&&t.uninitialized>0&&i.report({node:a,messageId:"combineUninitialized",data:{type:o},fix:y(s)})}}if(!f(o,s))if(l[o].initialized===e&&l[o].uninitialized===e)i.report({node:a,messageId:"combine",data:{type:o},fix:y(s)});else if(l[o].initialized===e&&d.initialized>0&&i.report({node:a,messageId:"combineInitialized",data:{type:o},fix:y(s)}),l[o].uninitialized===e&&d.uninitialized>0){if(a.parent.left===a&&("ForInStatement"===a.parent.type||"ForOfStatement"===a.parent.type))return;i.report({node:a,messageId:"combineUninitialized",data:{type:o},fix:y(s)})}if("ForStatement"!==r.type||r.init!==a){d.uninitialized+d.initialized>1&&(l[o].initialized===t&&l[o].uninitialized===t?i.report({node:a,messageId:"split",data:{type:o},fix:g(a)}):l[o].initialized===t&&d.initialized>0?i.report({node:a,messageId:"splitInitialized",data:{type:o},fix:g(a)}):l[o].uninitialized===t&&d.uninitialized>0&&i.report({node:a,messageId:"splitUninitialized",data:{type:o},fix:g(a)}))}},"ForStatement:exit":c,"ForOfStatement:exit":c,"ForInStatement:exit":c,"SwitchStatement:exit":c,"BlockStatement:exit":c,"Program:exit":p,"FunctionDeclaration:exit":p,"FunctionExpression:exit":p,"ArrowFunctionExpression:exit":p,"StaticBlock:exit":p}}};
//# sourceMappingURL=/sm/4f9df540ec679371c263610cec8bf2d2f64ea696e51be156d8fe92ddcce2e37c.map