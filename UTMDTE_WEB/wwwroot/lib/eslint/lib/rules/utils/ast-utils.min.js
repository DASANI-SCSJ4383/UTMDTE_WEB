/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/eslint@8.11.0/lib/rules/utils/ast-utils.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";const esutils=require("esutils"),espree=require("espree"),escapeRegExp=require("escape-string-regexp"),{breakableTypePattern:breakableTypePattern,createGlobalLinebreakMatcher:createGlobalLinebreakMatcher,lineBreakPattern:lineBreakPattern,shebangPattern:shebangPattern}=require("../../shared/ast-utils"),anyFunctionPattern=/^(?:Function(?:Declaration|Expression)|ArrowFunctionExpression)$/u,anyLoopPattern=/^(?:DoWhile|For|ForIn|ForOf|While)Statement$/u,arrayOrTypedArrayPattern=/Array$/u,arrayMethodPattern=/^(?:every|filter|find|findIndex|forEach|map|some)$/u,bindOrCallOrApplyPattern=/^(?:bind|call|apply)$/u,thisTagPattern=/^[\s*]*@this/mu,COMMENTS_IGNORE_PATTERN=/^\s*(?:eslint|jshint\s+|jslint\s+|istanbul\s+|globals?\s+|exported\s+|jscs)/u,LINEBREAKS=new Set(["\r\n","\r","\n","\u2028","\u2029"]),STATEMENT_LIST_PARENTS=new Set(["Program","BlockStatement","StaticBlock","SwitchCase"]),DECIMAL_INTEGER_PATTERN=/^(?:0|0[0-7]*[89]\d*|[1-9](?:_?\d)*)$/u,OCTAL_OR_NON_OCTAL_DECIMAL_ESCAPE_PATTERN=/^(?:[^\\]|\\.)*\\(?:[1-9]|0[0-9])/us,LOGICAL_ASSIGNMENT_OPERATORS=new Set(["&&=","||=","??="]);function isModifyingReference(e,t,n){const r=e.identifier,i=0===t||n[t-1].identifier!==r;return r&&!1===e.init&&e.isWrite()&&i}function startsWithUpperCase(e){return e[0]!==e[0].toLocaleLowerCase()}function isES5Constructor(e){return e.id&&startsWithUpperCase(e.id.name)}function getUpperFunction(e){for(let t=e;t;t=t.parent)if(anyFunctionPattern.test(t.type))return t;return null}function isFunction(e){return Boolean(e&&anyFunctionPattern.test(e.type))}function isLoop(e){return Boolean(e&&anyLoopPattern.test(e.type))}function isInLoop(e){for(let t=e;t&&!isFunction(t);t=t.parent)if(isLoop(t))return!0;return!1}function isNullLiteral(e){return"Literal"===e.type&&null===e.value&&!e.regex&&!e.bigint}function isNullOrUndefined(e){return isNullLiteral(e)||"Identifier"===e.type&&"undefined"===e.name||"UnaryExpression"===e.type&&"void"===e.operator}function isCallee(e){return"CallExpression"===e.parent.type&&e.parent.callee===e}function getStaticStringValue(e){switch(e.type){case"Literal":if(null!==e.value)return String(e.value);if(isNullLiteral(e))return String(e.value);if(e.regex)return`/${e.regex.pattern}/${e.regex.flags}`;if(e.bigint)return e.bigint;break;case"TemplateLiteral":if(0===e.expressions.length&&1===e.quasis.length)return e.quasis[0].value.cooked}return null}function getStaticPropertyName(e){let t;switch(e&&e.type){case"ChainExpression":return getStaticPropertyName(e.expression);case"Property":case"PropertyDefinition":case"MethodDefinition":t=e.key;break;case"MemberExpression":t=e.property}return t?"Identifier"!==t.type||e.computed?getStaticStringValue(t):t.name:null}function skipChainExpression(e){return e&&"ChainExpression"===e.type?e.expression:e}function checkText(e,t){return"string"==typeof t?e===t:t.test(e)}function isSpecificId(e,t){return"Identifier"===e.type&&checkText(e.name,t)}function isSpecificMemberAccess(e,t,n){const r=skipChainExpression(e);if("MemberExpression"!==r.type)return!1;if(t&&!isSpecificId(r.object,t))return!1;if(n){const e=getStaticPropertyName(r);if("string"!=typeof e||!checkText(e,n))return!1}return!0}function equalLiteralValue(e,t){return e.regex||t.regex?Boolean(e.regex&&t.regex&&e.regex.pattern===t.regex.pattern&&e.regex.flags===t.regex.flags):e.bigint||t.bigint?e.bigint===t.bigint:e.value===t.value}function isSameReference(e,t,n=!1){if(e.type!==t.type)return"ChainExpression"===e.type?isSameReference(e.expression,t,n):"ChainExpression"===t.type&&isSameReference(e,t.expression,n);switch(e.type){case"Super":case"ThisExpression":return!0;case"Identifier":case"PrivateIdentifier":return e.name===t.name;case"Literal":return equalLiteralValue(e,t);case"ChainExpression":return isSameReference(e.expression,t.expression,n);case"MemberExpression":if(!n){const r=getStaticPropertyName(e);if(null!==r)return isSameReference(e.object,t.object,n)&&r===getStaticPropertyName(t)}return e.computed===t.computed&&isSameReference(e.object,t.object,n)&&isSameReference(e.property,t.property,n);default:return!1}}function isReflectApply(e){return isSpecificMemberAccess(e,"Reflect","apply")}function isArrayFromMethod(e){return isSpecificMemberAccess(e,arrayOrTypedArrayPattern,"from")}function isMethodWhichHasThisArg(e){return isSpecificMemberAccess(e,null,arrayMethodPattern)}function negate(e){return t=>!e(t)}function hasJSDocThisTag(e,t){const n=t.getJSDocComment(e);return!(!n||!thisTagPattern.test(n.value))||t.getCommentsBefore(e).some((e=>thisTagPattern.test(e.value)))}function isParenthesised(e,t){const n=e.getTokenBefore(t),r=e.getTokenAfter(t);return Boolean(n&&r)&&"("===n.value&&n.range[1]<=t.range[0]&&")"===r.value&&r.range[0]>=t.range[1]}function isEqToken(e){return"="===e.value&&"Punctuator"===e.type}function isArrowToken(e){return"=>"===e.value&&"Punctuator"===e.type}function isCommaToken(e){return","===e.value&&"Punctuator"===e.type}function isDotToken(e){return"."===e.value&&"Punctuator"===e.type}function isQuestionDotToken(e){return"?."===e.value&&"Punctuator"===e.type}function isSemicolonToken(e){return";"===e.value&&"Punctuator"===e.type}function isColonToken(e){return":"===e.value&&"Punctuator"===e.type}function isOpeningParenToken(e){return"("===e.value&&"Punctuator"===e.type}function isClosingParenToken(e){return")"===e.value&&"Punctuator"===e.type}function isOpeningBracketToken(e){return"["===e.value&&"Punctuator"===e.type}function isClosingBracketToken(e){return"]"===e.value&&"Punctuator"===e.type}function isOpeningBraceToken(e){return"{"===e.value&&"Punctuator"===e.type}function isClosingBraceToken(e){return"}"===e.value&&"Punctuator"===e.type}function isCommentToken(e){return"Line"===e.type||"Block"===e.type||"Shebang"===e.type}function isKeywordToken(e){return"Keyword"===e.type}function getOpeningParenOfParams(e,t){if("ArrowFunctionExpression"===e.type&&1===e.params.length){const n=t.getFirstToken(e.params[0]),r=t.getTokenBefore(n);return isOpeningParenToken(r)?r:n}return e.id?t.getTokenAfter(e.id,isOpeningParenToken):t.getFirstToken(e,isOpeningParenToken)}function equalTokens(e,t,n){const r=n.getTokens(e),i=n.getTokens(t);if(r.length!==i.length)return!1;for(let e=0;e<r.length;++e)if(r[e].type!==i[e].type||r[e].value!==i[e].value)return!1;return!0}function isLogicalExpression(e){return"LogicalExpression"===e.type&&("&&"===e.operator||"||"===e.operator)}function isCoalesceExpression(e){return"LogicalExpression"===e.type&&"??"===e.operator}function isMixedLogicalAndCoalesceExpressions(e,t){return isLogicalExpression(e)&&isCoalesceExpression(t)||isCoalesceExpression(e)&&isLogicalExpression(t)}function isLogicalAssignmentOperator(e){return LOGICAL_ASSIGNMENT_OPERATORS.has(e)}function getSwitchCaseColonToken(e,t){return e.test?t.getTokenAfter(e.test,isColonToken):t.getFirstToken(e,1)}function getModuleExportName(e){return"Identifier"===e.type?e.name:e.value}module.exports={COMMENTS_IGNORE_PATTERN:COMMENTS_IGNORE_PATTERN,LINEBREAKS:LINEBREAKS,LINEBREAK_MATCHER:lineBreakPattern,SHEBANG_MATCHER:shebangPattern,STATEMENT_LIST_PARENTS:STATEMENT_LIST_PARENTS,isTokenOnSameLine:(e,t)=>e.loc.end.line===t.loc.start.line,isNullOrUndefined:isNullOrUndefined,isCallee:isCallee,isES5Constructor:isES5Constructor,getUpperFunction:getUpperFunction,isFunction:isFunction,isLoop:isLoop,isInLoop:isInLoop,isArrayFromMethod:isArrayFromMethod,isParenthesised:isParenthesised,createGlobalLinebreakMatcher:createGlobalLinebreakMatcher,equalTokens:equalTokens,isArrowToken:isArrowToken,isClosingBraceToken:isClosingBraceToken,isClosingBracketToken:isClosingBracketToken,isClosingParenToken:isClosingParenToken,isColonToken:isColonToken,isCommaToken:isCommaToken,isCommentToken:isCommentToken,isDotToken:isDotToken,isQuestionDotToken:isQuestionDotToken,isKeywordToken:isKeywordToken,isNotClosingBraceToken:negate(isClosingBraceToken),isNotClosingBracketToken:negate(isClosingBracketToken),isNotClosingParenToken:negate(isClosingParenToken),isNotColonToken:negate(isColonToken),isNotCommaToken:negate(isCommaToken),isNotDotToken:negate(isDotToken),isNotQuestionDotToken:negate(isQuestionDotToken),isNotOpeningBraceToken:negate(isOpeningBraceToken),isNotOpeningBracketToken:negate(isOpeningBracketToken),isNotOpeningParenToken:negate(isOpeningParenToken),isNotSemicolonToken:negate(isSemicolonToken),isOpeningBraceToken:isOpeningBraceToken,isOpeningBracketToken:isOpeningBracketToken,isOpeningParenToken:isOpeningParenToken,isSemicolonToken:isSemicolonToken,isEqToken:isEqToken,isStringLiteral:e=>"Literal"===e.type&&"string"==typeof e.value||"TemplateLiteral"===e.type,isBreakableStatement:e=>breakableTypePattern.test(e.type),getModifyingReferences:e=>e.filter(isModifyingReference),isSurroundedBy:(e,t)=>e[0]===t&&e[e.length-1]===t,isDirectiveComment(e){const t=e.value.trim();return"Line"===e.type&&0===t.indexOf("eslint-")||"Block"===e.type&&(0===t.indexOf("global ")||0===t.indexOf("eslint ")||0===t.indexOf("eslint-"))},getTrailingStatement:esutils.ast.trailingStatement,getVariableByName(e,t){let n=e;for(;n;){const e=n.set.get(t);if(e)return e;n=n.upper}return null},isDefaultThisBinding(e,t,{capIsConstructor:n=!0}={}){if("PropertyDefinition"===e.parent.type&&e.parent.value===e)return!1;if("StaticBlock"===e.type)return!1;if(n&&isES5Constructor(e)||hasJSDocThisTag(e,t))return!1;const r=null===e.id;let i=e;for(;i;){const e=i.parent;switch(e.type){case"LogicalExpression":case"ConditionalExpression":case"ChainExpression":i=e;break;case"ReturnStatement":{const t=getUpperFunction(e);if(null===t||!isCallee(t))return!0;i=t.parent;break}case"ArrowFunctionExpression":if(i!==e.body||!isCallee(e))return!0;i=e.parent;break;case"Property":case"PropertyDefinition":case"MethodDefinition":return e.value!==i;case"AssignmentExpression":case"AssignmentPattern":return"MemberExpression"!==e.left.type&&!(n&&r&&"Identifier"===e.left.type&&startsWithUpperCase(e.left.name));case"VariableDeclarator":return!(n&&r&&e.init===i&&"Identifier"===e.id.type&&startsWithUpperCase(e.id.name));case"MemberExpression":if(e.object===i&&isSpecificMemberAccess(e,null,bindOrCallOrApplyPattern)){const t="ChainExpression"===e.parent.type?e.parent:e;return!(isCallee(t)&&t.parent.arguments.length>=1&&!isNullOrUndefined(t.parent.arguments[0]))}return!0;case"CallExpression":return isReflectApply(e.callee)?3!==e.arguments.length||e.arguments[0]!==i||isNullOrUndefined(e.arguments[1]):isArrayFromMethod(e.callee)?3!==e.arguments.length||e.arguments[1]!==i||isNullOrUndefined(e.arguments[2]):!isMethodWhichHasThisArg(e.callee)||(2!==e.arguments.length||e.arguments[0]!==i||isNullOrUndefined(e.arguments[1]));default:return!0}}return!0},getPrecedence(e){switch(e.type){case"SequenceExpression":return 0;case"AssignmentExpression":case"ArrowFunctionExpression":case"YieldExpression":return 1;case"ConditionalExpression":return 3;case"LogicalExpression":switch(e.operator){case"||":case"??":return 4;case"&&":return 5}case"BinaryExpression":switch(e.operator){case"|":return 6;case"^":return 7;case"&":return 8;case"==":case"!=":case"===":case"!==":return 9;case"<":case"<=":case">":case">=":case"in":case"instanceof":return 10;case"<<":case">>":case">>>":return 11;case"+":case"-":return 12;case"*":case"/":case"%":return 13;case"**":return 15}case"UnaryExpression":case"AwaitExpression":return 16;case"UpdateExpression":return 17;case"CallExpression":case"ChainExpression":case"ImportExpression":return 18;case"NewExpression":return 19;default:return 20}},isEmptyBlock:e=>Boolean(e&&"BlockStatement"===e.type&&0===e.body.length),isEmptyFunction:e=>isFunction(e)&&module.exports.isEmptyBlock(e.body),getDirectivePrologue(e){const t=[];if("Program"===e.type||"FunctionDeclaration"===e.type||"FunctionExpression"===e.type||"ArrowFunctionExpression"===e.type&&"BlockStatement"===e.body.type){const n="Program"===e.type?e.body:e.body.body;for(const e of n){if("ExpressionStatement"!==e.type||"Literal"!==e.expression.type)break;t.push(e)}}return t},isDecimalInteger:e=>"Literal"===e.type&&"number"==typeof e.value&&DECIMAL_INTEGER_PATTERN.test(e.raw),isDecimalIntegerNumericToken:e=>"Numeric"===e.type&&DECIMAL_INTEGER_PATTERN.test(e.value),getFunctionNameWithKind(e){const t=e.parent,n=[];if("MethodDefinition"!==t.type&&"PropertyDefinition"!==t.type||(t.static&&n.push("static"),t.computed||"PrivateIdentifier"!==t.key.type||n.push("private")),e.async&&n.push("async"),e.generator&&n.push("generator"),"Property"===t.type||"MethodDefinition"===t.type){if("constructor"===t.kind)return"constructor";"get"===t.kind?n.push("getter"):"set"===t.kind?n.push("setter"):n.push("method")}else"PropertyDefinition"===t.type?n.push("method"):("ArrowFunctionExpression"===e.type&&n.push("arrow"),n.push("function"));if("Property"===t.type||"MethodDefinition"===t.type||"PropertyDefinition"===t.type)if(t.computed||"PrivateIdentifier"!==t.key.type){const r=getStaticPropertyName(t);null!==r?n.push(`'${r}'`):e.id&&n.push(`'${e.id.name}'`)}else n.push(`#${t.key.name}`);else e.id&&n.push(`'${e.id.name}'`);return n.join(" ")},getFunctionHeadLoc(e,t){const n=e.parent;let r=null,i=null;if("Property"===n.type||"MethodDefinition"===n.type||"PropertyDefinition"===n.type)r=n.loc.start,i=getOpeningParenOfParams(e,t).loc.start;else if("ArrowFunctionExpression"===e.type){const n=t.getTokenBefore(e.body,isArrowToken);r=n.loc.start,i=n.loc.end}else r=e.loc.start,i=getOpeningParenOfParams(e,t).loc.start;return{start:Object.assign({},r),end:Object.assign({},i)}},getNextLocation:(e,{line:t,column:n})=>n<e.lines[t-1].length?{line:t,column:n+1}:t<e.lines.length?{line:t+1,column:0}:null,getParenthesisedText(e,t){let n=e.getFirstToken(t),r=e.getLastToken(t);for(;e.getTokenBefore(n)&&"Punctuator"===e.getTokenBefore(n).type&&"("===e.getTokenBefore(n).value&&e.getTokenAfter(r)&&"Punctuator"===e.getTokenAfter(r).type&&")"===e.getTokenAfter(r).value;)n=e.getTokenBefore(n),r=e.getTokenAfter(r);return e.getText().slice(n.range[0],r.range[1])},couldBeError(e){switch(e.type){case"Identifier":case"CallExpression":case"NewExpression":case"MemberExpression":case"TaggedTemplateExpression":case"YieldExpression":case"AwaitExpression":case"ChainExpression":return!0;case"AssignmentExpression":return["=","&&="].includes(e.operator)?module.exports.couldBeError(e.right):!!["||=","??="].includes(e.operator)&&(module.exports.couldBeError(e.left)||module.exports.couldBeError(e.right));case"SequenceExpression":{const t=e.expressions;return 0!==t.length&&module.exports.couldBeError(t[t.length-1])}case"LogicalExpression":return"&&"===e.operator?module.exports.couldBeError(e.right):module.exports.couldBeError(e.left)||module.exports.couldBeError(e.right);case"ConditionalExpression":return module.exports.couldBeError(e.consequent)||module.exports.couldBeError(e.alternate);default:return!1}},isNumericLiteral:e=>"Literal"===e.type&&("number"==typeof e.value||Boolean(e.bigint)),canTokensBeAdjacent(e,t){const n={ecmaVersion:espree.latestEcmaVersion,comment:!0,range:!0};let r,i;if("string"==typeof e){let t;try{t=espree.tokenize(e,n)}catch{return!1}const i=t.comments;if(r=t[t.length-1],i.length){const e=i[i.length-1];e.range[0]>r.range[0]&&(r=e)}}else r=e;if("Shebang"===r.type)return!1;if("string"==typeof t){let e;try{e=espree.tokenize(t,n)}catch{return!1}const r=e.comments;if(i=e[0],r.length){const e=r[0];e.range[0]<i.range[0]&&(i=e)}}else i=t;if("Punctuator"===r.type||"Punctuator"===i.type){if("Punctuator"===r.type&&"Punctuator"===i.type){const e=new Set(["+","++"]),t=new Set(["-","--"]);return!(e.has(r.value)&&e.has(i.value)||t.has(r.value)&&t.has(i.value))}return"Punctuator"!==r.type||"/"!==r.value||!["Block","Line","RegularExpression"].includes(i.type)}return"String"===r.type||"String"===i.type||"Template"===r.type||"Template"===i.type||(!("Numeric"===r.type||"Numeric"!==i.type||!i.value.startsWith("."))||("Block"===r.type||"Block"===i.type||"Line"===i.type||"PrivateIdentifier"===i.type))},getNameLocationInGlobalDirectiveComment(e,t,n){const r=new RegExp(`[\\s,]${escapeRegExp(n)}(?:$|[\\s,:])`,"gu");r.lastIndex=t.value.indexOf("global")+6;const i=r.exec(t.value),s=e.getLocFromIndex(t.range[0]+"/*".length+(i?i.index+1:0));return{start:s,end:{line:s.line,column:s.column+(i?n.length:1)}}},hasOctalOrNonOctalDecimalEscapeSequence:e=>OCTAL_OR_NON_OCTAL_DECIMAL_ESCAPE_PATTERN.test(e),isLogicalExpression:isLogicalExpression,isCoalesceExpression:isCoalesceExpression,isMixedLogicalAndCoalesceExpressions:isMixedLogicalAndCoalesceExpressions,isNullLiteral:isNullLiteral,getStaticStringValue:getStaticStringValue,getStaticPropertyName:getStaticPropertyName,skipChainExpression:skipChainExpression,isSpecificId:isSpecificId,isSpecificMemberAccess:isSpecificMemberAccess,equalLiteralValue:equalLiteralValue,isSameReference:isSameReference,isLogicalAssignmentOperator:isLogicalAssignmentOperator,getSwitchCaseColonToken:getSwitchCaseColonToken,getModuleExportName:getModuleExportName};
//# sourceMappingURL=/sm/0ccb537f499ee12c5aafc9be8b7a4b26325246d350156200f503e5cd34dee8c6.map