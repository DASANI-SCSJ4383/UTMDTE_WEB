/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/eslint@8.11.0/lib/rules/no-misleading-character-class.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";const{CALL:CALL,CONSTRUCT:CONSTRUCT,ReferenceTracker:ReferenceTracker,getStringIfConstant:getStringIfConstant}=require("eslint-utils"),{RegExpParser:RegExpParser,visitRegExpAST:visitRegExpAST}=require("regexpp"),{isCombiningCharacter:isCombiningCharacter,isEmojiModifier:isEmojiModifier,isRegionalIndicatorSymbol:isRegionalIndicatorSymbol,isSurrogatePair:isSurrogatePair}=require("./utils/unicode");function*iterateCharacterSequence(e){let r=[];for(const a of e)switch(a.type){case"Character":r.push(a.value);break;case"CharacterClassRange":r.push(a.min.value),yield r,r=[a.max.value];break;case"CharacterSet":r.length>0&&(yield r,r=[])}r.length>0&&(yield r)}const hasCharacterSequence={surrogatePairWithoutUFlag:e=>e.some(((r,a)=>0!==a&&isSurrogatePair(e[a-1],r))),combiningClass:e=>e.some(((r,a)=>0!==a&&isCombiningCharacter(r)&&!isCombiningCharacter(e[a-1]))),emojiModifier:e=>e.some(((r,a)=>0!==a&&isEmojiModifier(r)&&!isEmojiModifier(e[a-1]))),regionalIndicatorSymbol:e=>e.some(((r,a)=>0!==a&&isRegionalIndicatorSymbol(r)&&isRegionalIndicatorSymbol(e[a-1]))),zwj(e){const r=e.length-1;return e.some(((a,t)=>0!==t&&t!==r&&8205===a&&8205!==e[t-1]&&8205!==e[t+1]))}},kinds=Object.keys(hasCharacterSequence);module.exports={meta:{type:"problem",docs:{description:"disallow characters which are made with multiple code points in character class syntax",recommended:!0,url:"https://eslint.org/docs/rules/no-misleading-character-class"},schema:[],messages:{surrogatePairWithoutUFlag:"Unexpected surrogate pair in character class. Use 'u' flag.",combiningClass:"Unexpected combined character in character class.",emojiModifier:"Unexpected modified Emoji in character class.",regionalIndicatorSymbol:"Unexpected national flag in character class.",zwj:"Unexpected joined character sequence in character class."}},create(e){const r=new RegExpParser;function a(a,t,i){const n={surrogatePairWithoutUFlag:!1,combiningClass:!1,variationSelector:!1,emojiModifier:!1,regionalIndicatorSymbol:!1,zwj:!1};let s;try{s=r.parsePattern(t,0,t.length,i.includes("u"))}catch{return}visitRegExpAST(s,{onCharacterClassEnter(e){for(const r of iterateCharacterSequence(e.elements))for(const e of kinds)n[e]=n[e]||hasCharacterSequence[e](r)}});for(const r of kinds)n[r]&&e.report({node:a,messageId:r})}return{"Literal[regex]"(e){a(e,e.regex.pattern,e.regex.flags)},Program(){const r=e.getScope(),t=new ReferenceTracker(r);for(const{node:e}of t.iterateGlobalReferences({RegExp:{[CALL]:!0,[CONSTRUCT]:!0}})){const[t,i]=e.arguments,n=getStringIfConstant(t,r),s=getStringIfConstant(i,r);"string"==typeof n&&a(e,n,s||"")}}}}};
//# sourceMappingURL=/sm/b297dc8730775cd0f78be9546665f19f11af24b705b0bb4843711cfb7e68b152.map