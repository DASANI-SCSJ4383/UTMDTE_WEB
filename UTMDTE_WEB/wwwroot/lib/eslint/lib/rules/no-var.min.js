/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/eslint@8.11.0/lib/rules/no-var.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";const astUtils=require("./utils/ast-utils");function isGlobal(e){return Boolean(e.scope)&&"global"===e.scope.type}function getEnclosingFunctionScope(e){let t=e;for(;"function"!==t.type&&"global"!==t.type;)t=t.upper;return t}function isReferencedInClosure(e){const t=getEnclosingFunctionScope(e.scope);return e.references.some((e=>getEnclosingFunctionScope(e.from)!==t))}function isLoopAssignee(e){return("ForOfStatement"===e.parent.type||"ForInStatement"===e.parent.type)&&e===e.parent.left}function isDeclarationInitialized(e){return e.declarations.every((e=>null!==e.init))}const SCOPE_NODE_TYPE=/^(?:Program|BlockStatement|SwitchStatement|ForStatement|ForInStatement|ForOfStatement)$/u;function getScopeNode(e){for(let t=e;t;t=t.parent)if(SCOPE_NODE_TYPE.test(t.type))return t;return null}function isRedeclared(e){return e.defs.length>=2}function isUsedFromOutsideOf(e){function t(t){const n=e.range,r=t.identifier.range;return r[0]<n[0]||r[1]>n[1]}return function(e){return e.references.some(t)}}function hasReferenceInTDZ(e){const t=e.range[0],n=e.range[1];return e=>{const r=e.defs[0].name,o=r.range[0],i="AssignmentPattern"===r.parent.type?r.parent.right:null,s=i&&i.range[0],a=i&&i.range[1];return e.references.some((e=>{const r=e.identifier.range[0],c=e.identifier.range[1];return!e.init&&(r<o||null!==i&&r>=s&&c<=a||r>=t&&c<=n)}))}}function hasNameDisallowedForLetDeclarations(e){return"let"===e.name}module.exports={meta:{type:"suggestion",docs:{description:"require `let` or `const` instead of `var`",recommended:!1,url:"https://eslint.org/docs/rules/no-var"},schema:[],fixable:"code",messages:{unexpectedVar:"Unexpected var, use let or const instead."}},create(e){const t=e.getSourceCode();function n(t){if(!t.init)return!1;return e.getDeclaredVariables(t).some(hasReferenceInTDZ(t.init))}function r(r){e.report({node:r,messageId:"unexpectedVar",fix(o){const i=t.getFirstToken(r,{filter:e=>"var"===e.value});return function(t){const r=e.getDeclaredVariables(t),o=getScopeNode(t);if("SwitchCase"===t.parent.type||t.declarations.some(n)||r.some(isGlobal)||r.some(isRedeclared)||r.some(isUsedFromOutsideOf(o))||r.some(hasNameDisallowedForLetDeclarations))return!1;if(astUtils.isInLoop(t)){if(r.some(isReferencedInClosure))return!1;if(!isLoopAssignee(t)&&!isDeclarationInitialized(t))return!1}return!!(isLoopAssignee(t)||"ForStatement"===t.parent.type&&t.parent.init===t||astUtils.STATEMENT_LIST_PARENTS.has(t.parent.type))}(r)?o.replaceText(i,"let"):null}})}return{"VariableDeclaration:exit"(e){"var"===e.kind&&r(e)}}}};
//# sourceMappingURL=/sm/8084afa3b65981553663b18f9b0d064ad637309a6e51bae7a360abb143028045.map