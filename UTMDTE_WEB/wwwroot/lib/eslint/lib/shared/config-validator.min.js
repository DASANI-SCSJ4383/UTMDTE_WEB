/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/eslint@8.11.0/lib/shared/config-validator.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";const util=require("util"),configSchema=require("../../conf/config-schema"),BuiltInRules=require("../rules"),{Legacy:{ConfigOps:ConfigOps,environments:BuiltInEnvironments}}=require("@eslint/eslintrc"),{emitDeprecationWarning:emitDeprecationWarning}=require("./deprecation-warnings"),ajv=require("./ajv")(),ruleValidators=new WeakMap,noop=Function.prototype;let validateSchema;const severityMap={error:2,warn:1,off:0};function getRuleOptionsSchema(e){if(!e)return null;const a=e.schema||e.meta&&e.meta.schema;return Array.isArray(a)?a.length?{type:"array",items:a,minItems:0,maxItems:a.length}:{type:"array",minItems:0,maxItems:0}:a||null}function validateRuleSeverity(e){const a=Array.isArray(e)?e[0]:e,t="string"==typeof a?severityMap[a.toLowerCase()]:a;if(0===t||1===t||2===t)return t;throw new Error(`\tSeverity should be one of the following: 0 = off, 1 = warn, 2 = error (you passed '${util.inspect(a).replace(/'/gu,'"').replace(/\n/gu,"")}').\n`)}function validateRuleSchema(e,a){if(!ruleValidators.has(e)){const a=getRuleOptionsSchema(e);a&&ruleValidators.set(e,ajv.compile(a))}const t=ruleValidators.get(e);if(t&&(t(a),t.errors))throw new Error(t.errors.map((e=>`\tValue ${JSON.stringify(e.data)} ${e.message}.\n`)).join(""))}function validateRuleOptions(e,a,t,n=null){try{0!==validateRuleSeverity(t)&&validateRuleSchema(e,Array.isArray(t)?t.slice(1):[])}catch(e){const t=`Configuration for rule "${a}" is invalid:\n${e.message}`;throw"string"==typeof n?new Error(`${n}:\n\t${t}`):new Error(t)}}function validateEnvironment(e,a,t=noop){e&&Object.keys(e).forEach((e=>{if(!(t(e)||BuiltInEnvironments.get(e)||null)){throw new Error(`${a}:\n\tEnvironment key "${e}" is unknown\n`)}}))}function validateRules(e,a,t=noop){e&&Object.keys(e).forEach((n=>{validateRuleOptions(t(n)||BuiltInRules.get(n)||null,n,e[n],a)}))}function validateGlobals(e,a=null){e&&Object.entries(e).forEach((([e,t])=>{try{ConfigOps.normalizeConfigGlobal(t)}catch(t){throw new Error(`ESLint configuration of global '${e}' in ${a} is invalid:\n${t.message}`)}}))}function validateProcessor(e,a,t){if(e&&!t(e))throw new Error(`ESLint configuration of processor in '${a}' is invalid: '${e}' was not found.`)}function formatErrors(e){return e.map((e=>{if("additionalProperties"===e.keyword){return`Unexpected top-level property "${e.dataPath.length?`${e.dataPath.slice(1)}.${e.params.additionalProperty}`:e.params.additionalProperty}"`}if("type"===e.keyword){return`Property "${e.dataPath.slice(1)}" is the wrong type (expected ${Array.isArray(e.schema)?e.schema.join("/"):e.schema} but got \`${JSON.stringify(e.data)}\`)`}return`"${"."===e.dataPath[0]?e.dataPath.slice(1):e.dataPath}" ${e.message}. Value: ${JSON.stringify(e.data)}`})).map((e=>`\t- ${e}.\n`)).join("")}function validateConfigSchema(e,a=null){if(validateSchema=validateSchema||ajv.compile(configSchema),!validateSchema(e))throw new Error(`ESLint configuration in ${a} is invalid:\n${formatErrors(validateSchema.errors)}`);Object.hasOwnProperty.call(e,"ecmaFeatures")&&emitDeprecationWarning(a,"ESLINT_LEGACY_ECMAFEATURES")}function validate(e,a,t,n){validateConfigSchema(e,a),validateRules(e.rules,a,t),validateEnvironment(e.env,a,n),validateGlobals(e.globals,a);for(const r of e.overrides||[])validateRules(r.rules,a,t),validateEnvironment(r.env,a,n),validateGlobals(e.globals,a)}const validated=new WeakSet;function validateConfigArray(e){const a=Map.prototype.get.bind(e.pluginEnvironments),t=Map.prototype.get.bind(e.pluginProcessors),n=Map.prototype.get.bind(e.pluginRules);for(const r of e)validated.has(r)||(validated.add(r),validateEnvironment(r.env,r.name,a),validateGlobals(r.globals,r.name),validateProcessor(r.processor,r.name,t),validateRules(r.rules,r.name,n))}module.exports={getRuleOptionsSchema:getRuleOptionsSchema,validate:validate,validateConfigArray:validateConfigArray,validateConfigSchema:validateConfigSchema,validateRuleOptions:validateRuleOptions};
//# sourceMappingURL=/sm/70266986c310d6429dde2c36546c8d83b0c189938fc7c62cbb7fa46eebc1a3c8.map