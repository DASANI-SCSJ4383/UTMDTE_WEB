/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/eslint-plugin-import@2.25.4/lib/rules/no-unused-modules.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_ExportMap=require("../ExportMap"),_ExportMap2=_interopRequireDefault(_ExportMap),_ignore=require("eslint-module-utils/ignore"),_resolve=require("eslint-module-utils/resolve"),_resolve2=_interopRequireDefault(_resolve),_visit=require("eslint-module-utils/visit"),_visit2=_interopRequireDefault(_visit),_docsUrl=require("../docsUrl"),_docsUrl2=_interopRequireDefault(_docsUrl),_path=require("path"),_readPkgUp2=require("eslint-module-utils/readPkgUp"),_readPkgUp3=_interopRequireDefault(_readPkgUp2),_object=require("object.values"),_object2=_interopRequireDefault(_object),_arrayIncludes=require("array-includes"),_arrayIncludes2=_interopRequireDefault(_arrayIncludes);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var FileEnumerator=void 0,listFilesToProcess=void 0;try{var _require=require("eslint/use-at-your-own-risk");FileEnumerator=_require.FileEnumerator}catch(e){try{var _require2=require("eslint/lib/cli-engine/file-enumerator");FileEnumerator=_require2.FileEnumerator}catch(e){try{var _require3=require("eslint/lib/util/glob-utils"),originalListFilesToProcess=_require3.listFilesToProcess;listFilesToProcess=function(e,t){return originalListFilesToProcess(e,{extensions:t})}}catch(e){var _require4=require("eslint/lib/util/glob-util"),_originalListFilesToProcess=_require4.listFilesToProcess;listFilesToProcess=function(e,t){var r=e.reduce((function(e,r){return e.concat(t.map((function(e){return/\*\*|\*\./.test(r)?r:String(r)+"/**/*"+String(e)})))}),e.slice());return _originalListFilesToProcess(r)}}}}FileEnumerator&&(listFilesToProcess=function(e,t){var r=new FileEnumerator({extensions:t});return Array.from(r.iterateFiles(e),(function(e){var t=e.filePath;return{ignored:e.ignored,filename:t}}))});var EXPORT_DEFAULT_DECLARATION="ExportDefaultDeclaration",EXPORT_NAMED_DECLARATION="ExportNamedDeclaration",EXPORT_ALL_DECLARATION="ExportAllDeclaration",IMPORT_DECLARATION="ImportDeclaration",IMPORT_NAMESPACE_SPECIFIER="ImportNamespaceSpecifier",IMPORT_DEFAULT_SPECIFIER="ImportDefaultSpecifier",VARIABLE_DECLARATION="VariableDeclaration",FUNCTION_DECLARATION="FunctionDeclaration",CLASS_DECLARATION="ClassDeclaration",IDENTIFIER="Identifier",OBJECT_PATTERN="ObjectPattern",TS_INTERFACE_DECLARATION="TSInterfaceDeclaration",TS_TYPE_ALIAS_DECLARATION="TSTypeAliasDeclaration",TS_ENUM_DECLARATION="TSEnumDeclaration",DEFAULT="default";function forEachDeclarationIdentifier(e,t){e&&(e.type===FUNCTION_DECLARATION||e.type===CLASS_DECLARATION||e.type===TS_INTERFACE_DECLARATION||e.type===TS_TYPE_ALIAS_DECLARATION||e.type===TS_ENUM_DECLARATION?t(e.id.name):e.type===VARIABLE_DECLARATION&&e.declarations.forEach((function(e){var r=e.id;r.type===OBJECT_PATTERN?(0,_ExportMap.recursivePatternCapture)(r,(function(e){e.type===IDENTIFIER&&t(e.name)})):t(r.name)})))}var importList=new Map,exportList=new Map,visitorKeyMap=new Map,ignoredFiles=new Set,filesOutsideSrc=new Set,isNodeModule=function(e){return/\/(node_modules)\//.test(e)},resolveFiles=function(e,t,r){var i=Array.from((0,_ignore.getFileExtensions)(r.settings)),o=new Set,n=listFilesToProcess(e,i);return listFilesToProcess(t,i).forEach((function(e){var t=e.filename;return ignoredFiles.add(t)})),n.filter((function(e){var t=e.filename;return!isNodeModule(t)})).forEach((function(e){var t=e.filename;o.add(t)})),o},prepareImportsAndExports=function(e,t){var r=new Map;e.forEach((function(e){var i=new Map,o=new Map,n=_ExportMap2.default.get(e,t);if(n){var s=n.dependencies,a=n.reexports,E=n.imports,u=n.namespace,d=n.visitorKeys;visitorKeyMap.set(e,d);var l=new Set;if(s.forEach((function(e){var t=e();null!==t&&l.add(t.path)})),r.set(e,l),a.forEach((function(e,t){t===DEFAULT?i.set(IMPORT_DEFAULT_SPECIFIER,{whereUsed:new Set}):i.set(t,{whereUsed:new Set});var r=e.getImport();if(r){var n=o.get(r.path),s=void 0;s=e.local===DEFAULT?IMPORT_DEFAULT_SPECIFIER:e.local,n=void 0!==n?new Set([].concat(_toConsumableArray(n),[s])):new Set([s]),o.set(r.path,n)}})),E.forEach((function(e,t){if(!isNodeModule(t)){var r=o.get(t)||new Set;e.declarations.forEach((function(e){return e.importedSpecifiers.forEach((function(e){return r.add(e)}))})),o.set(t,r)}})),importList.set(e,o),ignoredFiles.has(e))return;u.forEach((function(e,t){t===DEFAULT?i.set(IMPORT_DEFAULT_SPECIFIER,{whereUsed:new Set}):i.set(t,{whereUsed:new Set})}))}i.set(EXPORT_ALL_DECLARATION,{whereUsed:new Set}),i.set(IMPORT_NAMESPACE_SPECIFIER,{whereUsed:new Set}),exportList.set(e,i)})),r.forEach((function(e,t){e.forEach((function(e){exportList.get(e).get(EXPORT_ALL_DECLARATION).whereUsed.add(t)}))}))},determineUsage=function(){importList.forEach((function(e,t){e.forEach((function(e,r){var i=exportList.get(r);void 0!==i&&e.forEach((function(e){var r=void 0;if(void 0!==(r=e===IMPORT_NAMESPACE_SPECIFIER?IMPORT_NAMESPACE_SPECIFIER:e===IMPORT_DEFAULT_SPECIFIER?IMPORT_DEFAULT_SPECIFIER:e)){var o=i.get(r);if(void 0!==o){var n=o.whereUsed;n.add(t),i.set(r,{whereUsed:n})}}}))}))}))},getSrc=function(e){return e||[process.cwd()]},srcFiles=void 0,lastPrepareKey=void 0,doPreparation=function(e,t,r){var i=JSON.stringify({src:(e||[]).sort(),ignoreExports:(t||[]).sort(),extensions:Array.from((0,_ignore.getFileExtensions)(r.settings)).sort()});i!==lastPrepareKey&&(importList.clear(),exportList.clear(),ignoredFiles.clear(),filesOutsideSrc.clear(),srcFiles=resolveFiles(getSrc(e),t,r),prepareImportsAndExports(srcFiles,r),determineUsage(),lastPrepareKey=i)},newNamespaceImportExists=function(e){return e.some((function(e){return e.type===IMPORT_NAMESPACE_SPECIFIER}))},newDefaultImportExists=function(e){return e.some((function(e){return e.type===IMPORT_DEFAULT_SPECIFIER}))},fileIsInPkg=function(e){var t=(0,_readPkgUp3.default)({cwd:e}),r=t.path,i=t.pkg,o=(0,_path.dirname)(r),n=function(t){if((0,_path.join)(o,t)===e)return!0},s=function(t){return"string"==typeof t?n(t):"object"===(void 0===t?"undefined":_typeof(t))?function(t){var r=(0,_object2.default)(t).map((function(e){return(0,_path.join)(o,e)}));if((0,_arrayIncludes2.default)(r,e))return!0}(t):void 0};return!0!==i.private&&(!(!i.bin||!s(i.bin))||(!(!i.browser||!s(i.browser))||!(!i.main||!n(i.main))))};module.exports={meta:{type:"suggestion",docs:{url:(0,_docsUrl2.default)("no-unused-modules")},schema:[{properties:{src:{description:"files/paths to be analyzed (only for unused exports)",type:"array",minItems:1,items:{type:"string",minLength:1}},ignoreExports:{description:"files/paths for which unused exports will not be reported (e.g module entry points)",type:"array",minItems:1,items:{type:"string",minLength:1}},missingExports:{description:"report modules without any exports",type:"boolean"},unusedExports:{description:"report exports without any usage",type:"boolean"}},not:{properties:{unusedExports:{enum:[!1]},missingExports:{enum:[!1]}}},anyOf:[{not:{properties:{unusedExports:{enum:[!0]}}},required:["missingExports"]},{not:{properties:{missingExports:{enum:[!0]}}},required:["unusedExports"]},{properties:{unusedExports:{enum:[!0]}},required:["unusedExports"]},{properties:{missingExports:{enum:[!0]}},required:["missingExports"]}]}]},create:function(e){var t=e.options[0]||{},r=t.src,i=t.ignoreExports,o=void 0===i?[]:i,n=t.missingExports,s=t.unusedExports;s&&doPreparation(r,o,e);var a=e.getPhysicalFilename?e.getPhysicalFilename():e.getFilename(),E=function(t){if(n&&!ignoredFiles.has(a)){var r=exportList.get(a),i=r.get(EXPORT_ALL_DECLARATION),o=r.get(IMPORT_NAMESPACE_SPECIFIER);r.delete(EXPORT_ALL_DECLARATION),r.delete(IMPORT_NAMESPACE_SPECIFIER),r.size<1&&e.report(t.body[0]?t.body[0]:t,"No exports found"),r.set(EXPORT_ALL_DECLARATION,i),r.set(IMPORT_NAMESPACE_SPECIFIER,o)}},u=function(t,i){if(s&&!ignoredFiles.has(a)&&!fileIsInPkg(a)&&!filesOutsideSrc.has(a))if(srcFiles.has(a)||(srcFiles=resolveFiles(getSrc(r),o,e)).has(a)){exports=exportList.get(a);var n=exports.get(EXPORT_ALL_DECLARATION);if(!(void 0!==n&&i!==IMPORT_DEFAULT_SPECIFIER&&n.whereUsed.size>0)){var E=exports.get(IMPORT_NAMESPACE_SPECIFIER);if(!(void 0!==E&&E.whereUsed.size>0)){var u=i===DEFAULT?IMPORT_DEFAULT_SPECIFIER:i,d=exports.get(u),l=u===IMPORT_DEFAULT_SPECIFIER?DEFAULT:u;void 0!==d?d.whereUsed.size<1&&e.report(t,"exported declaration '"+l+"' not used within other modules"):e.report(t,"exported declaration '"+l+"' not used within other modules")}}}else filesOutsideSrc.add(a)},d=function(e){if(!ignoredFiles.has(a)){var t=exportList.get(a);void 0===t&&(t=new Map);var r=new Map,i=new Set;e.body.forEach((function(e){var t=e.type,r=e.declaration,o=e.specifiers;t===EXPORT_DEFAULT_DECLARATION&&i.add(IMPORT_DEFAULT_SPECIFIER),t===EXPORT_NAMED_DECLARATION&&(o.length>0&&o.forEach((function(e){e.exported&&i.add(e.exported.name)})),forEachDeclarationIdentifier(r,(function(e){i.add(e)})))})),t.forEach((function(e,t){i.has(t)&&r.set(t,e)})),i.forEach((function(e){t.has(e)||r.set(e,{whereUsed:new Set})}));var o=t.get(EXPORT_ALL_DECLARATION),n=t.get(IMPORT_NAMESPACE_SPECIFIER);void 0===n&&(n={whereUsed:new Set}),r.set(EXPORT_ALL_DECLARATION,o),r.set(IMPORT_NAMESPACE_SPECIFIER,n),exportList.set(a,r)}},l=function(t){if(s){var r=importList.get(a);void 0===r&&(r=new Map);var i=new Set,o=new Set,n=new Set,E=new Set,u=new Set,d=new Set,l=new Map,c=new Map;r.forEach((function(e,t){e.has(EXPORT_ALL_DECLARATION)&&n.add(t),e.has(IMPORT_NAMESPACE_SPECIFIER)&&i.add(t),e.has(IMPORT_DEFAULT_SPECIFIER)&&u.add(t),e.forEach((function(e){e!==IMPORT_NAMESPACE_SPECIFIER&&e!==IMPORT_DEFAULT_SPECIFIER&&l.set(e,t)}))})),(0,_visit2.default)(t,visitorKeyMap.get(a),{ImportExpression:function(e){p(e.source)},CallExpression:function(e){"Import"===e.callee.type&&p(e.arguments[0])}}),t.body.forEach((function(t){var r=void 0;if(t.type===EXPORT_NAMED_DECLARATION&&t.source&&(r=(0,_resolve2.default)(t.source.raw.replace(/('|")/g,""),e),t.specifiers.forEach((function(e){var t=e.local.name;e.local.name===DEFAULT?d.add(r):c.set(t,r)}))),t.type===EXPORT_ALL_DECLARATION&&(r=(0,_resolve2.default)(t.source.raw.replace(/('|")/g,""),e),E.add(r)),t.type===IMPORT_DECLARATION){if(!(r=(0,_resolve2.default)(t.source.raw.replace(/('|")/g,""),e)))return;if(isNodeModule(r))return;newNamespaceImportExists(t.specifiers)&&o.add(r),newDefaultImportExists(t.specifiers)&&d.add(r),t.specifiers.forEach((function(e){e.type!==IMPORT_DEFAULT_SPECIFIER&&e.type!==IMPORT_NAMESPACE_SPECIFIER&&c.set(e.imported.name,r)}))}})),E.forEach((function(e){if(!n.has(e)){var t=r.get(e);void 0===t&&(t=new Set),t.add(EXPORT_ALL_DECLARATION),r.set(e,t);var i=exportList.get(e),o=void 0;if(void 0!==i?o=i.get(EXPORT_ALL_DECLARATION):(i=new Map,exportList.set(e,i)),void 0!==o)o.whereUsed.add(a);else{var s=new Set;s.add(a),i.set(EXPORT_ALL_DECLARATION,{whereUsed:s})}}})),n.forEach((function(e){if(!E.has(e)){r.get(e).delete(EXPORT_ALL_DECLARATION);var t=exportList.get(e);if(void 0!==t){var i=t.get(EXPORT_ALL_DECLARATION);void 0!==i&&i.whereUsed.delete(a)}}})),d.forEach((function(e){if(!u.has(e)){var t=r.get(e);void 0===t&&(t=new Set),t.add(IMPORT_DEFAULT_SPECIFIER),r.set(e,t);var i=exportList.get(e),o=void 0;if(void 0!==i?o=i.get(IMPORT_DEFAULT_SPECIFIER):(i=new Map,exportList.set(e,i)),void 0!==o)o.whereUsed.add(a);else{var n=new Set;n.add(a),i.set(IMPORT_DEFAULT_SPECIFIER,{whereUsed:n})}}})),u.forEach((function(e){if(!d.has(e)){r.get(e).delete(IMPORT_DEFAULT_SPECIFIER);var t=exportList.get(e);if(void 0!==t){var i=t.get(IMPORT_DEFAULT_SPECIFIER);void 0!==i&&i.whereUsed.delete(a)}}})),o.forEach((function(e){if(!i.has(e)){var t=r.get(e);void 0===t&&(t=new Set),t.add(IMPORT_NAMESPACE_SPECIFIER),r.set(e,t);var o=exportList.get(e),n=void 0;if(void 0!==o?n=o.get(IMPORT_NAMESPACE_SPECIFIER):(o=new Map,exportList.set(e,o)),void 0!==n)n.whereUsed.add(a);else{var s=new Set;s.add(a),o.set(IMPORT_NAMESPACE_SPECIFIER,{whereUsed:s})}}})),i.forEach((function(e){if(!o.has(e)){r.get(e).delete(IMPORT_NAMESPACE_SPECIFIER);var t=exportList.get(e);if(void 0!==t){var i=t.get(IMPORT_NAMESPACE_SPECIFIER);void 0!==i&&i.whereUsed.delete(a)}}})),c.forEach((function(e,t){if(!l.has(t)){var i=r.get(e);void 0===i&&(i=new Set),i.add(t),r.set(e,i);var o=exportList.get(e),n=void 0;if(void 0!==o?n=o.get(t):(o=new Map,exportList.set(e,o)),void 0!==n)n.whereUsed.add(a);else{var s=new Set;s.add(a),o.set(t,{whereUsed:s})}}})),l.forEach((function(e,t){if(!c.has(t)){r.get(e).delete(t);var i=exportList.get(e);if(void 0!==i){var o=i.get(t);void 0!==o&&o.whereUsed.delete(a)}}}))}function p(t){if("Literal"!==t.type)return null;var r=(0,_resolve2.default)(t.value,e);if(null==r)return null;o.add(r)}};return{"Program:exit":function(e){d(e),l(e),E(e)},ExportDefaultDeclaration:function(e){u(e,IMPORT_DEFAULT_SPECIFIER)},ExportNamedDeclaration:function(e){e.specifiers.forEach((function(t){u(e,t.exported.name)})),forEachDeclarationIdentifier(e.declaration,(function(t){u(e,t)}))}}}};
//# sourceMappingURL=/sm/95f05bed3e8e2e99953141e1eebe18cdb4101314bdbc0991f0cb25acbbcd169a.map