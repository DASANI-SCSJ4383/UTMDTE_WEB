/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/eslint-plugin-import@2.25.4/lib/rules/no-cycle.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";var _slicedToArray=function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,r){var t=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(t.push(a.value),!r||t.length!==r);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return t}(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")},_resolve=require("eslint-module-utils/resolve"),_resolve2=_interopRequireDefault(_resolve),_ExportMap=require("../ExportMap"),_ExportMap2=_interopRequireDefault(_ExportMap),_importType=require("../core/importType"),_moduleVisitor=require("eslint-module-utils/moduleVisitor"),_moduleVisitor2=_interopRequireDefault(_moduleVisitor),_docsUrl=require("../docsUrl"),_docsUrl2=_interopRequireDefault(_docsUrl);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)}function routeString(e){return e.map((function(e){return String(e.value)+":"+String(e.loc.start.line)})).join("=>")}module.exports={meta:{type:"suggestion",docs:{url:(0,_docsUrl2.default)("no-cycle")},schema:[(0,_moduleVisitor.makeOptionsSchema)({maxDepth:{oneOf:[{description:"maximum dependency depth to traverse",type:"integer",minimum:1},{enum:["âˆž"],type:"string"}]},ignoreExternal:{description:"ignore external modules",type:"boolean",default:!1}})]},create:function(e){var r=e.getPhysicalFilename?e.getPhysicalFilename():e.getFilename();if("<text>"===r)return{};var t=e.options[0]||{},n="number"==typeof t.maxDepth?t.maxDepth:1/0,o=function(r){return t.ignoreExternal&&(0,_importType.isExternalModule)(r,(0,_resolve2.default)(r,e),e)};return(0,_moduleVisitor2.default)((function(t,i){if(!o(t.value)&&("ImportDeclaration"!==i.type||"type"!==i.importKind&&!i.specifiers.every((function(e){return"type"===e.importKind})))){var a=_ExportMap2.default.get(t.value,e);if(null!=a&&a.path!==r)for(var u=[{mget:function(){return a},route:[]}],l=new Set;u.length>0;){var s=u.shift();if(p(s)){var c=s.route.length>0?"Dependency cycle via "+String(routeString(s.route)):"Dependency cycle detected.";return void e.report(i,c)}}}function p(e){var t=e.mget,i=e.route,a=t();if(null!=a&&!l.has(a.path)){l.add(a.path);var s=!0,c=!1,p=void 0;try{for(var f,d=a.imports[Symbol.iterator]();!(s=(f=d.next()).done);s=!0){var y=f.value,m=_slicedToArray(y,2),v=m[0],h=m[1],_=h.getter,g=h.declarations;if(!l.has(v)){var x=[].concat(_toConsumableArray(g)).filter((function(e){var r=e.source,t=e.isOnlyImportingTypes;return!o(r.value)&&!t}));if(v===r&&x.length>0)return!0;if(i.length+1<n){var D=!0,S=!1,b=void 0;try{for(var q,A=x[Symbol.iterator]();!(D=(q=A.next()).done);D=!0){var E=q.value.source;u.push({mget:_,route:i.concat(E)})}}catch(e){S=!0,b=e}finally{try{!D&&A.return&&A.return()}finally{if(S)throw b}}}}}}catch(e){c=!0,p=e}finally{try{!s&&d.return&&d.return()}finally{if(c)throw p}}}}}),e.options[0])}};
//# sourceMappingURL=/sm/984290d7931409dec2ea99793e9f9c58d781ddf494d627a7cc7ec9454192327a.map