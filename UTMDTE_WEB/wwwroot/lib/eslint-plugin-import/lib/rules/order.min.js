/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/eslint-plugin-import@2.25.4/lib/rules/order.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";var _slicedToArray=function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,r){var t=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(t.push(a.value),!r||t.length!==r);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return t}(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")},_minimatch=require("minimatch"),_minimatch2=_interopRequireDefault(_minimatch),_importType=require("../core/importType"),_importType2=_interopRequireDefault(_importType),_staticRequire=require("../core/staticRequire"),_staticRequire2=_interopRequireDefault(_staticRequire),_docsUrl=require("../docsUrl"),_docsUrl2=_interopRequireDefault(_docsUrl);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var defaultGroups=["builtin","external","parent","sibling","index"];function reverse(e){return e.map((function(e){return Object.assign({},e,{rank:-e.rank})})).reverse()}function getTokensOrCommentsAfter(e,r,t){for(var n=r,o=[],i=0;i<t&&null!=(n=e.getTokenOrCommentAfter(n));i++)o.push(n);return o}function getTokensOrCommentsBefore(e,r,t){for(var n=r,o=[],i=0;i<t&&null!=(n=e.getTokenOrCommentBefore(n));i++)o.push(n);return o.reverse()}function takeTokensAfterWhile(e,r,t){for(var n=getTokensOrCommentsAfter(e,r,100),o=[],i=0;i<n.length&&t(n[i]);i++)o.push(n[i]);return o}function takeTokensBeforeWhile(e,r,t){for(var n=getTokensOrCommentsBefore(e,r,100),o=[],i=n.length-1;i>=0&&t(n[i]);i--)o.push(n[i]);return o.reverse()}function findOutOfOrder(e){if(0===e.length)return[];var r=e[0];return e.filter((function(e){var t=e.rank<r.rank;return r.rank<e.rank&&(r=e),t}))}function findRootNode(e){for(var r=e;null!=r.parent&&null==r.parent.body;)r=r.parent;return r}function findEndOfLineWithComments(e,r){for(var t=takeTokensAfterWhile(e,r,commentOnSameLineAs(r)),n=t.length>0?t[t.length-1].range[1]:r.range[1],o=n,i=n;i<e.text.length;i++){if("\n"===e.text[i]){o=i+1;break}if(" "!==e.text[i]&&"\t"!==e.text[i]&&"\r"!==e.text[i])break;o=i+1}return o}function commentOnSameLineAs(e){return function(r){return("Block"===r.type||"Line"===r.type)&&r.loc.start.line===r.loc.end.line&&r.loc.end.line===e.loc.end.line}}function findStartOfLineWithComments(e,r){for(var t=takeTokensBeforeWhile(e,r,commentOnSameLineAs(r)),n=t.length>0?t[0].range[0]:r.range[0],o=n,i=n-1;i>0&&(" "===e.text[i]||"\t"===e.text[i]);i--)o=i;return o}function isPlainRequireModule(e){if("VariableDeclaration"!==e.type)return!1;if(1!==e.declarations.length)return!1;var r=e.declarations[0];return r.id&&("Identifier"===r.id.type||"ObjectPattern"===r.id.type)&&null!=r.init&&"CallExpression"===r.init.type&&null!=r.init.callee&&"require"===r.init.callee.name&&null!=r.init.arguments&&1===r.init.arguments.length&&"Literal"===r.init.arguments[0].type}function isPlainImportModule(e){return"ImportDeclaration"===e.type&&null!=e.specifiers&&e.specifiers.length>0}function isPlainImportEquals(e){return"TSImportEqualsDeclaration"===e.type&&e.moduleReference.expression}function canCrossNodeWhileReorder(e){return isPlainRequireModule(e)||isPlainImportModule(e)||isPlainImportEquals(e)}function canReorderItems(e,r){var t=e.parent,n=[t.body.indexOf(e),t.body.indexOf(r)].sort(),o=_slicedToArray(n,2),i=o[0],a=o[1],u=t.body.slice(i,a+1),s=!0,p=!1,f=void 0;try{for(var l,c=u[Symbol.iterator]();!(s=(l=c.next()).done);s=!0){if(!canCrossNodeWhileReorder(l.value))return!1}}catch(e){p=!0,f=e}finally{try{!s&&c.return&&c.return()}finally{if(p)throw f}}return!0}function fixOutOfOrder(e,r,t,n){var o=e.getSourceCode(),i=findRootNode(r.node),a=findStartOfLineWithComments(o,i),u=findEndOfLineWithComments(o,i),s=findRootNode(t.node),p=findStartOfLineWithComments(o,s),f=findEndOfLineWithComments(o,s),l=canReorderItems(i,s),c=o.text.substring(p,f);"\n"!==c[c.length-1]&&(c+="\n");var d="`"+String(t.displayName)+"` import should occur "+String(n)+" import of `"+String(r.displayName)+"`";"before"===n?e.report({node:t.node,message:d,fix:l&&function(e){return e.replaceTextRange([a,f],c+o.text.substring(a,p))}}):"after"===n&&e.report({node:t.node,message:d,fix:l&&function(e){return e.replaceTextRange([p,u],o.text.substring(f,u)+c)}})}function reportOutOfOrder(e,r,t,n){t.forEach((function(t){var o=r.find((function(e){return e.rank>t.rank}));fixOutOfOrder(e,o,t,n)}))}function makeOutOfOrderReport(e,r){var t=findOutOfOrder(r);if(t.length){var n=reverse(r),o=findOutOfOrder(n);o.length<t.length?reportOutOfOrder(e,n,o,"after"):reportOutOfOrder(e,r,t,"before")}}function getSorter(e){var r=e?1:-1;return function(e,t){return(e<t?-1:e>t?1:0)*r}}function mutateRanksToAlphabetize(e,r){var t=e.reduce((function(e,r){return Array.isArray(e[r.rank])||(e[r.rank]=[]),e[r.rank].push(r),e}),{}),n=Object.keys(t),o=getSorter("asc"===r.order),i=r.caseInsensitive?function(e,r){return o(String(e.value).toLowerCase(),String(r.value).toLowerCase())}:function(e,r){return o(e.value,r.value)};n.forEach((function(e){t[e].sort(i)}));var a=0,u=n.sort().reduce((function(e,r){return t[r].forEach((function(t){e[String(t.value)+"|"+String(t.node.importKind)]=parseInt(r,10)+a,a+=1})),e}),{});e.forEach((function(e){e.rank=u[String(e.value)+"|"+String(e.node.importKind)]}))}function computePathRank(e,r,t,n){for(var o=0,i=r.length;o<i;o++){var a=r[o],u=a.pattern,s=a.patternOptions,p=a.group,f=a.position,l=void 0===f?1:f;if((0,_minimatch2.default)(t,u,s||{nocomment:!0}))return e[p]+l/n}}function computeRank(e,r,t,n){var o=void 0,i=void 0;return o="import:object"===t.type?"object":"type"===t.node.importKind&&-1===r.omittedTypes.indexOf("type")?"type":(0,_importType2.default)(t.value,e),n.has(o)||(i=computePathRank(r.groups,r.pathGroups,t.value,r.maxPosition)),void 0===i&&(i=r.groups[o]),"import"===t.type||t.type.startsWith("import:")||(i+=100),i}function registerNode(e,r,t,n,o){var i=computeRank(e,t,r,o);-1!==i&&n.push(Object.assign({},r,{rank:i}))}function getRequireBlock(e){for(var r=e;"MemberExpression"===r.parent.type&&r.parent.object===r||"CallExpression"===r.parent.type&&r.parent.callee===r;)r=r.parent;if("VariableDeclarator"===r.parent.type&&"VariableDeclaration"===r.parent.parent.type&&"Program"===r.parent.parent.parent.type)return r.parent.parent.parent}var types=["builtin","external","internal","unknown","parent","sibling","index","object","type"];function convertGroupsToRanks(e){var r=e.reduce((function(e,r,t){return"string"==typeof r&&(r=[r]),r.forEach((function(r){if(-1===types.indexOf(r))throw new Error("Incorrect configuration of the rule: Unknown type `"+JSON.stringify(r)+"`");if(void 0!==e[r])throw new Error("Incorrect configuration of the rule: `"+r+"` is duplicated");e[r]=t})),e}),{}),t=types.filter((function(e){return void 0===r[e]}));return{groups:t.reduce((function(r,t){return r[t]=e.length,r}),r),omittedTypes:t}}function convertPathGroupsForRanks(e){var r={},t={},n=e.map((function(e,n){var o=e.group,i=e.position,a=0;return"after"===i?(r[o]||(r[o]=1),a=r[o]++):"before"===i&&(t[o]||(t[o]=[]),t[o].push(n)),Object.assign({},e,{position:a})})),o=1;return Object.keys(t).forEach((function(e){var r=t[e].length;t[e].forEach((function(e,t){n[e].position=-1*(r-t)})),o=Math.max(o,r)})),Object.keys(r).forEach((function(e){var t=r[e];o=Math.max(o,t-1)})),{pathGroups:n,maxPosition:o>10?Math.pow(10,Math.ceil(Math.log10(o))):10}}function fixNewLineAfterImport(e,r){var t=findRootNode(r.node),n=takeTokensAfterWhile(e.getSourceCode(),t,commentOnSameLineAs(t)),o=t.range[1];return n.length>0&&(o=n[n.length-1].range[1]),function(e){return e.insertTextAfterRange([t.range[0],o],"\n")}}function removeNewLineAfterImport(e,r,t){var n=e.getSourceCode(),o=findRootNode(t.node),i=findRootNode(r.node),a=[findEndOfLineWithComments(n,o),findStartOfLineWithComments(n,i)];if(/^\s*$/.test(n.text.substring(a[0],a[1])))return function(e){return e.removeRange(a)}}function makeNewlinesBetweenReport(e,r,t){var n=r[0];r.slice(1).forEach((function(r){var o=function(r,t){return e.getSourceCode().lines.slice(t.node.loc.end.line,r.node.loc.start.line-1).filter((function(e){return!e.trim().length})).length}(r,n);"always"===t||"always-and-inside-groups"===t?r.rank!==n.rank&&0===o?e.report({node:n.node,message:"There should be at least one empty line between import groups",fix:fixNewLineAfterImport(e,n)}):r.rank===n.rank&&o>0&&"always-and-inside-groups"!==t&&e.report({node:n.node,message:"There should be no empty line within import group",fix:removeNewLineAfterImport(e,r,n)}):o>0&&e.report({node:n.node,message:"There should be no empty line between import groups",fix:removeNewLineAfterImport(e,r,n)}),n=r}))}function getAlphabetizeConfig(e){var r=e.alphabetize||{};return{order:r.order||"ignore",caseInsensitive:r.caseInsensitive||!1}}module.exports={meta:{type:"suggestion",docs:{url:(0,_docsUrl2.default)("order")},fixable:"code",schema:[{type:"object",properties:{groups:{type:"array"},pathGroupsExcludedImportTypes:{type:"array"},pathGroups:{type:"array",items:{type:"object",properties:{pattern:{type:"string"},patternOptions:{type:"object"},group:{type:"string",enum:types},position:{type:"string",enum:["after","before"]}},required:["pattern","group"]}},"newlines-between":{enum:["ignore","always","always-and-inside-groups","never"]},alphabetize:{type:"object",properties:{caseInsensitive:{type:"boolean",default:!1},order:{enum:["ignore","asc","desc"],default:"ignore"}},additionalProperties:!1},warnOnUnassignedImports:{type:"boolean",default:!1}},additionalProperties:!1}]},create:function(e){var r=e.options[0]||{},t=r["newlines-between"]||"ignore",n=new Set(r.pathGroupsExcludedImportTypes||["builtin","external","object"]),o=getAlphabetizeConfig(r),i=void 0;try{var a=convertPathGroupsForRanks(r.pathGroups||[]),u=a.pathGroups,s=a.maxPosition,p=convertGroupsToRanks(r.groups||defaultGroups),f=p.groups,l=p.omittedTypes;i={groups:f,omittedTypes:l,pathGroups:u,maxPosition:s}}catch(r){return{Program:function(t){e.report(t,r.message)}}}var c=new Map;function d(e){return c.has(e)||c.set(e,[]),c.get(e)}return{ImportDeclaration:function(t){if(t.specifiers.length||r.warnOnUnassignedImports){var o=t.source.value;registerNode(e,{node:t,value:o,displayName:o,type:"import"},i,d(t.parent),n)}},TSImportEqualsDeclaration:function(r){var t=void 0,o=void 0,a=void 0;r.isExport||("TSExternalModuleReference"===r.moduleReference.type?(t=o=r.moduleReference.expression.value,a="import"):(o="",t=e.getSourceCode().getText(r.moduleReference),a="import:object"),registerNode(e,{node:r,value:o,displayName:t,type:a},i,d(r.parent),n))},CallExpression:function(r){if((0,_staticRequire2.default)(r)){var t=getRequireBlock(r);if(t){var o=r.arguments[0].value;registerNode(e,{node:r,value:o,displayName:o,type:"require"},i,d(t),n)}}},"Program:exit":function(){c.forEach((function(r){"ignore"!==t&&makeNewlinesBetweenReport(e,r,t),"ignore"!==o.order&&mutateRanksToAlphabetize(r,o),makeOutOfOrderReport(e,r)})),c.clear()}}}};
//# sourceMappingURL=/sm/2f56ec07ceb1ee6577c76a50754757a906a3f02f3e2f4af3764b37423fe65093.map