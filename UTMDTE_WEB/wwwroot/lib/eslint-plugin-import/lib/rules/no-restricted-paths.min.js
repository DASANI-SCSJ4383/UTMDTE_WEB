/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/eslint-plugin-import@2.25.4/lib/rules/no-restricted-paths.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";var _path=require("path"),_path2=_interopRequireDefault(_path),_resolve=require("eslint-module-utils/resolve"),_resolve2=_interopRequireDefault(_resolve),_moduleVisitor=require("eslint-module-utils/moduleVisitor"),_moduleVisitor2=_interopRequireDefault(_moduleVisitor),_isGlob=require("is-glob"),_isGlob2=_interopRequireDefault(_isGlob),_minimatch=require("minimatch"),_minimatch2=_interopRequireDefault(_minimatch),_docsUrl=require("../docsUrl"),_docsUrl2=_interopRequireDefault(_docsUrl),_importType=require("../core/importType"),_importType2=_interopRequireDefault(_importType);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var containsPath=function(e,t){var r=_path2.default.relative(t,e);return""===r||!r.startsWith("..")};module.exports={meta:{type:"problem",docs:{url:(0,_docsUrl2.default)("no-restricted-paths")},schema:[{type:"object",properties:{zones:{type:"array",minItems:1,items:{type:"object",properties:{target:{type:"string"},from:{type:"string"},except:{type:"array",items:{type:"string"},uniqueItems:!0},message:{type:"string"}},additionalProperties:!1}},basePath:{type:"string"}},additionalProperties:!1}]},create:function(e){var t=e.options[0]||{},r=t.zones||[],i=t.basePath||process.cwd(),o=e.getPhysicalFilename?e.getPhysicalFilename():e.getFilename(),n=r.filter((function(e){var t=_path2.default.resolve(i,e.target);return(0,_isGlob2.default)(t)?(0,_minimatch2.default)(o,t):containsPath(o,t)}));function a(t,r){var i=_path2.default.relative(t,r);return"parent"!==(0,_importType2.default)(i,e)}function s(t){e.report({node:t,message:"Restricted path exceptions must be descendants of the configured `from` path for that zone."})}function u(t){e.report({node:t,message:"Restricted path exceptions must be glob patterns when`from` is a glob pattern"})}var l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=_path2.default.resolve(i,e),o=(0,_isGlob2.default)(e),n=void 0,l=void 0,p=void 0,c=void 0;if(o){var m=new _minimatch.Minimatch(r);if(n=function(e){return m.match(e)},l=t.every(_isGlob2.default)){var d=t.map((function(e){return new _minimatch.Minimatch(e)}));p=function(e){return d.some((function(t){return t.match(e)}))}}c=u}else{n=function(e){return containsPath(e,r)};var f=t.map((function(e){return _path2.default.resolve(r,e)}));(l=f.every((function(e){return a(r,e)})))&&(p=function(e){return f.some((function(t){return containsPath(e,t)}))}),c=s}return{isPathRestricted:n,hasValidExceptions:l,isPathException:p,reportInvalidException:c}},p=[];return(0,_moduleVisitor2.default)((function(t){var r,i,o;r=t.value,i=t,(o=(0,_resolve2.default)(r,e))&&n.forEach((function(t,n){p[n]||(p[n]=l(t.from,t.except));var a=p[n],s=a.isPathRestricted,u=a.hasValidExceptions,c=a.isPathException,m=a.reportInvalidException;s(o)&&(u?c(o)||e.report({node:i,message:'Unexpected path "{{importPath}}" imported in restricted zone.'+(t.message?" "+String(t.message):""),data:{importPath:r}}):m(i))}))}),{commonjs:!0})}};
//# sourceMappingURL=/sm/503dff3026b438bbd610651ea344466641687708dd0d261f11771ebce86f977d.map