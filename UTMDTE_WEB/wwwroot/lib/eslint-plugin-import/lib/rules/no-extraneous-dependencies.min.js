/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/eslint-plugin-import@2.25.4/lib/rules/no-extraneous-dependencies.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";var _slicedToArray=function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,n){var r=[],i=!0,t=!1,s=void 0;try{for(var a,p=e[Symbol.iterator]();!(i=(a=p.next()).done)&&(r.push(a.value),!n||r.length!==n);i=!0);}catch(e){t=!0,s=e}finally{try{!i&&p.return&&p.return()}finally{if(t)throw s}}return r}(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")},_path=require("path"),_path2=_interopRequireDefault(_path),_fs=require("fs"),_fs2=_interopRequireDefault(_fs),_readPkgUp=require("eslint-module-utils/readPkgUp"),_readPkgUp2=_interopRequireDefault(_readPkgUp),_minimatch=require("minimatch"),_minimatch2=_interopRequireDefault(_minimatch),_resolve=require("eslint-module-utils/resolve"),_resolve2=_interopRequireDefault(_resolve),_moduleVisitor=require("eslint-module-utils/moduleVisitor"),_moduleVisitor2=_interopRequireDefault(_moduleVisitor),_importType=require("../core/importType"),_importType2=_interopRequireDefault(_importType),_packagePath=require("../core/packagePath"),_docsUrl=require("../docsUrl"),_docsUrl2=_interopRequireDefault(_docsUrl);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var depFieldCache=new Map;function hasKeys(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).length>0}function arrayOrKeys(e){return Array.isArray(e)?e:Object.keys(e)}function extractDepFields(e){return{dependencies:e.dependencies||{},devDependencies:e.devDependencies||{},optionalDependencies:e.optionalDependencies||{},peerDependencies:e.peerDependencies||{},bundledDependencies:arrayOrKeys(e.bundleDependencies||e.bundledDependencies||[])}}function getDependencies(e,n){var r=[];try{var i={dependencies:{},devDependencies:{},optionalDependencies:{},peerDependencies:{},bundledDependencies:[]};return n&&n.length>0&&(r=Array.isArray(n)?n.map((function(e){return _path2.default.resolve(e)})):[_path2.default.resolve(n)]),r.length>0?r.forEach((function(e){var n=_path2.default.join(e,"package.json");if(!depFieldCache.has(n)){var r=extractDepFields(JSON.parse(_fs2.default.readFileSync(n,"utf8")));depFieldCache.set(n,r)}var t=depFieldCache.get(n);Object.keys(i).forEach((function(e){return Object.assign(i[e],t[e])}))})):Object.assign(i,extractDepFields((0,_readPkgUp2.default)({cwd:e.getPhysicalFilename?e.getPhysicalFilename():e.getFilename(),normalize:!1}).pkg)),[i.dependencies,i.devDependencies,i.optionalDependencies,i.peerDependencies,i.bundledDependencies].some(hasKeys)?i:null}catch(n){return r.length>0&&"ENOENT"===n.code&&e.report({message:"The package.json file could not be found.",loc:{line:0,column:0}}),("JSONError"===n.name||n instanceof SyntaxError)&&e.report({message:"The package.json file could not be parsed: "+n.message,loc:{line:0,column:0}}),null}}function missingErrorMessage(e){return"'"+String(e)+"' should be listed in the project's dependencies. Run 'npm i -S "+String(e)+"' to add it"}function devDepErrorMessage(e){return"'"+String(e)+"' should be listed in the project's dependencies, not devDependencies."}function optDepErrorMessage(e){return"'"+String(e)+"' should be listed in the project's dependencies, not optionalDependencies."}function getModuleOriginalName(e){var n=e.split("/"),r=_slicedToArray(n,2),i=r[0],t=r[1];return i.startsWith("@")?String(i)+"/"+String(t):i}function getModuleRealName(e){return(0,_packagePath.getFilePackageName)(e)}function checkDependencyDeclaration(e,n,r){var i=r||{isInDeps:!1,isInDevDeps:!1,isInOptDeps:!1,isInPeerDeps:!1,isInBundledDeps:!1},t=[],s=n?n.split("/"):[];return s.forEach((function(e,n){if(!e.startsWith("@")){var r=s.slice(0,n+1).join("/");t.push(r)}})),t.reduce((function(n,r){return{isInDeps:n.isInDeps||void 0!==e.dependencies[r],isInDevDeps:n.isInDevDeps||void 0!==e.devDependencies[r],isInOptDeps:n.isInOptDeps||void 0!==e.optionalDependencies[r],isInPeerDeps:n.isInPeerDeps||void 0!==e.peerDependencies[r],isInBundledDeps:n.isInBundledDeps||-1!==e.bundledDependencies.indexOf(r)}}),i)}function reportIfMissing(e,n,r,i,t){if("type"!==i.importKind&&"typeof"!==i.importKind&&"external"===(0,_importType2.default)(t,e)){var s=(0,_resolve2.default)(t,e);if(s){var a=getModuleOriginalName(t),p=checkDependencyDeclaration(n,a);if(!(p.isInDeps||r.allowDevDeps&&p.isInDevDeps||r.allowPeerDeps&&p.isInPeerDeps||r.allowOptDeps&&p.isInOptDeps||r.allowBundledDeps&&p.isInBundledDeps)){var o=getModuleRealName(s);o&&o!==a&&((p=checkDependencyDeclaration(n,o,p)).isInDeps||r.allowDevDeps&&p.isInDevDeps||r.allowPeerDeps&&p.isInPeerDeps||r.allowOptDeps&&p.isInOptDeps||r.allowBundledDeps&&p.isInBundledDeps)||(!p.isInDevDeps||r.allowDevDeps?!p.isInOptDeps||r.allowOptDeps?e.report(i,missingErrorMessage(o||a)):e.report(i,optDepErrorMessage(o||a)):e.report(i,devDepErrorMessage(o||a)))}}}}function testConfig(e,n){return"boolean"==typeof e||void 0===e?e:e.some((function(e){return(0,_minimatch2.default)(n,e)||(0,_minimatch2.default)(n,_path2.default.join(process.cwd(),e))}))}module.exports={meta:{type:"problem",docs:{url:(0,_docsUrl2.default)("no-extraneous-dependencies")},schema:[{type:"object",properties:{devDependencies:{type:["boolean","array"]},optionalDependencies:{type:["boolean","array"]},peerDependencies:{type:["boolean","array"]},bundledDependencies:{type:["boolean","array"]},packageDir:{type:["string","array"]}},additionalProperties:!1}]},create:function(e){var n=e.options[0]||{},r=e.getPhysicalFilename?e.getPhysicalFilename():e.getFilename(),i=getDependencies(e,n.packageDir)||extractDepFields({}),t={allowDevDeps:!1!==testConfig(n.devDependencies,r),allowOptDeps:!1!==testConfig(n.optionalDependencies,r),allowPeerDeps:!1!==testConfig(n.peerDependencies,r),allowBundledDeps:!1!==testConfig(n.bundledDependencies,r)};return(0,_moduleVisitor2.default)((function(n,r){reportIfMissing(e,i,t,r,n.value)}),{commonjs:!0})}};
//# sourceMappingURL=/sm/a7d1e3f7ad75f81c8c2ed700961ec4d242026a78ced319a916a6028ca8f1098e.map