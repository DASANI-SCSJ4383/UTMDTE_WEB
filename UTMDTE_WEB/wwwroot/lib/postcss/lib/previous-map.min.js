/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/postcss@8.4.12/lib/previous-map.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";let{SourceMapConsumer:SourceMapConsumer,SourceMapGenerator:SourceMapGenerator}=require("source-map-js"),{existsSync:existsSync,readFileSync:readFileSync}=require("fs"),{dirname:dirname,join:join}=require("path");function fromBase64(t){return Buffer?Buffer.from(t,"base64").toString():window.atob(t)}class PreviousMap{constructor(t,e){if(!1===e.map)return;this.loadAnnotation(t),this.inline=this.startWith(this.annotation,"data:");let r=e.map?e.map.prev:void 0,n=this.loadMap(e.from,r);!this.mapFile&&e.from&&(this.mapFile=e.from),this.mapFile&&(this.root=dirname(this.mapFile)),n&&(this.text=n)}consumer(){return this.consumerCache||(this.consumerCache=new SourceMapConsumer(this.text)),this.consumerCache}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}startWith(t,e){return!!t&&t.substr(0,e.length)===e}getAnnotationURL(t){return t.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}loadAnnotation(t){let e=t.match(/\/\*\s*# sourceMappingURL=/gm);if(!e)return;let r=t.lastIndexOf(e.pop()),n=t.indexOf("*/",r);r>-1&&n>-1&&(this.annotation=this.getAnnotationURL(t.substring(r,n)))}decodeInline(t){if(/^data:application\/json;charset=utf-?8,/.test(t)||/^data:application\/json,/.test(t))return decodeURIComponent(t.substr(RegExp.lastMatch.length));if(/^data:application\/json;charset=utf-?8;base64,/.test(t)||/^data:application\/json;base64,/.test(t))return fromBase64(t.substr(RegExp.lastMatch.length));let e=t.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+e)}loadFile(t){if(this.root=dirname(t),existsSync(t))return this.mapFile=t,readFileSync(t,"utf-8").toString().trim()}loadMap(t,e){if(!1===e)return!1;if(e){if("string"==typeof e)return e;if("function"!=typeof e){if(e instanceof SourceMapConsumer)return SourceMapGenerator.fromSourceMap(e).toString();if(e instanceof SourceMapGenerator)return e.toString();if(this.isMap(e))return JSON.stringify(e);throw new Error("Unsupported previous source map format: "+e.toString())}{let r=e(t);if(r){let t=this.loadFile(r);if(!t)throw new Error("Unable to load previous source map: "+r.toString());return t}}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let e=this.annotation;return t&&(e=join(dirname(t),e)),this.loadFile(e)}}}isMap(t){return"object"==typeof t&&("string"==typeof t.mappings||"string"==typeof t._mappings||Array.isArray(t.sections))}}module.exports=PreviousMap,PreviousMap.default=PreviousMap;
//# sourceMappingURL=/sm/a3fcd440398c953efd761d8797cb1b39edfa0bb56c458ceb905a645d79236871.map