/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/shelljs@0.8.5/src/rm.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var common=require("./common"),fs=require("fs");function rmdirSyncRecursive(r,o,e){var n;n=fs.readdirSync(r);for(var c=0;c<n.length;c++){var i=r+"/"+n[c];if(common.statNoFollowLinks(i).isDirectory())rmdirSyncRecursive(i,o);else if(o||isWriteable(i))try{common.unlinkSync(i)}catch(r){common.error("could not remove file (code "+r.code+"): "+i,{continue:!0})}}if(!e){var t;try{for(var m=Date.now();;)try{if(t=fs.rmdirSync(r),fs.existsSync(r))throw{code:"EAGAIN"};break}catch(r){if("win32"!==process.platform||"ENOTEMPTY"!==r.code&&"EBUSY"!==r.code&&"EPERM"!==r.code&&"EAGAIN"!==r.code){if("ENOENT"===r.code)break;throw r}if(Date.now()-m>1e3)throw r}}catch(o){common.error("could not remove directory (code "+o.code+"): "+r,{continue:!0})}return t}}function isWriteable(r){var o=!0;try{var e=fs.openSync(r,"a");fs.closeSync(e)}catch(r){o=!1}return o}function handleFile(r,o){o.force||isWriteable(r)?common.unlinkSync(r):common.error("permission denied: "+r,{continue:!0})}function handleDirectory(r,o){o.recursive?rmdirSyncRecursive(r,o.force):common.error("path is a directory",{continue:!0})}function handleSymbolicLink(r,o){var e;try{e=common.statFollowLinks(r)}catch(o){return void common.unlinkSync(r)}if(e.isFile())common.unlinkSync(r);else if(e.isDirectory())if("/"===r[r.length-1])if(o.recursive){rmdirSyncRecursive(r,o.force,!0)}else common.error("path is a directory",{continue:!0});else common.unlinkSync(r)}function handleFIFO(r){common.unlinkSync(r)}function _rm(r,o){return o||common.error("no paths given"),(o=[].slice.call(arguments,1)).forEach((function(o){var e;try{var n="/"===o[o.length-1]?o.slice(0,-1):o;e=common.statNoFollowLinks(n)}catch(e){return void(r.force||common.error("no such file or directory: "+o,{continue:!0}))}e.isFile()?handleFile(o,r):e.isDirectory()?handleDirectory(o,r):e.isSymbolicLink()?handleSymbolicLink(o,r):e.isFIFO()&&handleFIFO(o)})),""}common.register("rm",_rm,{cmdOptions:{f:"force",r:"recursive",R:"recursive"}}),module.exports=_rm;
//# sourceMappingURL=/sm/c973829868f04ce7d253ffe756685d37933e6d0d282ebe29f4ec156ada4f08e8.map