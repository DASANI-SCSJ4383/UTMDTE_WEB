/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/shelljs@0.8.5/src/chmod.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var common=require("./common"),fs=require("fs"),path=require("path"),PERMS=function(o){return{OTHER_EXEC:o.EXEC,OTHER_WRITE:o.WRITE,OTHER_READ:o.READ,GROUP_EXEC:o.EXEC<<3,GROUP_WRITE:o.WRITE<<3,GROUP_READ:o.READ<<3,OWNER_EXEC:o.EXEC<<6,OWNER_WRITE:o.WRITE<<6,OWNER_READ:o.READ<<6,STICKY:parseInt("01000",8),SETGID:parseInt("02000",8),SETUID:parseInt("04000",8),TYPE_MASK:parseInt("0770000",8)}}({EXEC:1,WRITE:2,READ:4});function _chmod(o,E,e){var r;return e||(o.length>0&&"-"===o.charAt(0)?[].unshift.call(arguments,""):common.error("You must specify a file.")),o=common.parseOptions(o,{R:"recursive",c:"changes",v:"verbose"}),e=[].slice.call(arguments,2),o.recursive?(r=[],e.forEach((function o(E){var e=common.statNoFollowLinks(E);e.isSymbolicLink()||(r.push(E),e.isDirectory()&&fs.readdirSync(E).forEach((function(e){o(E+"/"+e)})))}))):r=e,r.forEach((function(e){if(e=path.resolve(e),fs.existsSync(e)||common.error("File not found: "+e),!o.recursive||!common.statNoFollowLinks(e).isSymbolicLink()){var r=common.statFollowLinks(e),n=r.isDirectory(),c=r.mode,i=c&PERMS.TYPE_MASK,s=c;isNaN(parseInt(E,8))?E.split(",").forEach((function(E){var r=/([ugoa]*)([=\+-])([rwxXst]*)/i.exec(E);if(r){var R=r[1],t=r[2],a=r[3],m=-1!==R.indexOf("u")||"a"===R||""===R,S=-1!==R.indexOf("g")||"a"===R||""===R,f=-1!==R.indexOf("o")||"a"===R||""===R,l=-1!==a.indexOf("r"),O=-1!==a.indexOf("w"),T=-1!==a.indexOf("x"),I=-1!==a.indexOf("X"),P=-1!==a.indexOf("t"),d=-1!==a.indexOf("s");I&&n&&(T=!0);var u=0;switch(m&&(u|=(l?PERMS.OWNER_READ:0)+(O?PERMS.OWNER_WRITE:0)+(T?PERMS.OWNER_EXEC:0)+(d?PERMS.SETUID:0)),S&&(u|=(l?PERMS.GROUP_READ:0)+(O?PERMS.GROUP_WRITE:0)+(T?PERMS.GROUP_EXEC:0)+(d?PERMS.SETGID:0)),f&&(u|=(l?PERMS.OTHER_READ:0)+(O?PERMS.OTHER_WRITE:0)+(T?PERMS.OTHER_EXEC:0)),P&&(u|=PERMS.STICKY),t){case"+":s|=u;break;case"-":s&=~u;break;case"=":s=i+u,common.statFollowLinks(e).isDirectory()&&(s|=PERMS.SETUID+PERMS.SETGID&c);break;default:common.error("Could not recognize operator: `"+t+"`")}o.verbose&&console.log(e+" -> "+s.toString(8)),c!==s&&(!o.verbose&&o.changes&&console.log(e+" -> "+s.toString(8)),fs.chmodSync(e,s),c=s)}else common.error("Invalid symbolic mode change: "+E)})):(s=i+parseInt(E,8),common.statFollowLinks(e).isDirectory()&&(s|=PERMS.SETUID+PERMS.SETGID&c),fs.chmodSync(e,s))}})),""}common.register("chmod",_chmod,{}),module.exports=_chmod;
//# sourceMappingURL=/sm/343b8f664bac1a44950e354f50dcf81b6dc49e3faba541651d9a76a408f04ffa.map