/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/shelljs@0.8.5/src/exec.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var common=require("./common"),_tempDir=require("./tempdir").tempDir,_pwd=require("./pwd"),path=require("path"),fs=require("fs"),child=require("child_process"),DEFAULT_MAXBUFFER_SIZE=20971520,DEFAULT_ERROR_CODE=1;function execSync(e,n,c){common.config.execPath||common.error("Unable to find a path to the node binary. Please manually set config.execPath");var o=_tempDir(),i=path.resolve(o+"/"+common.randomFileName()),t=path.resolve(o+"/"+common.randomFileName()),r=path.resolve(o+"/"+common.randomFileName());n=common.extend({silent:common.config.silent,cwd:_pwd().toString(),env:process.env,maxBuffer:DEFAULT_MAXBUFFER_SIZE,encoding:"utf8"},n),fs.existsSync(i)&&common.unlinkSync(i),fs.existsSync(t)&&common.unlinkSync(t),fs.existsSync(r)&&common.unlinkSync(r),n.cwd=path.resolve(n.cwd);var m={command:e,execOptions:n,pipe:c,stdoutFile:r,stderrFile:t};function s(e,n){fs.writeFileSync(e,n,{encoding:"utf8",mode:parseInt("600",8)})}s(r,""),s(t,""),s(i,JSON.stringify(m));var a=[path.join(__dirname,"exec-child.js"),i];n.silent?n.stdio="ignore":n.stdio=[0,1,2];var d=0;try{delete n.shell,child.execFileSync(common.config.execPath,a,n)}catch(e){d=e.status||DEFAULT_ERROR_CODE}var l="",u="";"buffer"===n.encoding?(l=fs.readFileSync(r),u=fs.readFileSync(t)):(l=fs.readFileSync(r,n.encoding),u=fs.readFileSync(t,n.encoding));try{common.unlinkSync(i)}catch(e){}try{common.unlinkSync(t)}catch(e){}try{common.unlinkSync(r)}catch(e){}return 0!==d&&common.error(u,d,{continue:!0,silent:!0}),common.ShellString(l,u,d)}function execAsync(e,n,c,o){n=common.extend({silent:common.config.silent,cwd:_pwd().toString(),env:process.env,maxBuffer:DEFAULT_MAXBUFFER_SIZE,encoding:"utf8"},n);var i=child.exec(e,n,(function(e,n,c){o&&(e?void 0===e.code?o(1,n,c):o(e.code,n,c):o(0,n,c))}));return c&&i.stdin.end(c),n.silent||(i.stdout.pipe(process.stdout),i.stderr.pipe(process.stderr)),i}function _exec(e,n,c){n=n||{},e||common.error("must specify command");var o=common.readFromPipe();return"function"==typeof n&&(c=n,n={async:!0}),"object"==typeof n&&"function"==typeof c&&(n.async=!0),(n=common.extend({silent:common.config.silent,async:!1},n)).async?execAsync(e,n,o,c):execSync(e,n,o)}common.register("exec",_exec,{unix:!1,canReceivePipe:!0,wrapOutput:!1}),module.exports=_exec;
//# sourceMappingURL=/sm/509e914a073221338e947dbe2db8b2163c2b54912b5fad4b73aa4d7d3ddbc9a3.map