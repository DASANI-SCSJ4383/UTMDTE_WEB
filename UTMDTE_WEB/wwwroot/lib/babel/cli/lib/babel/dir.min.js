/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/@babel/cli@7.17.6/lib/babel/dir.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";function _slash(){const e=require("slash");return _slash=function(){return e},e}function _path(){const e=require("path");return _path=function(){return e},e}function _fs(){const e=require("fs");return _fs=function(){return e},e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=_default;var util=require("./util"),watcher=require("./watcher");function asyncGeneratorStep(e,t,n,r,i,o,s){try{var c=e[o](s),a=c.value}catch(e){return void n(e)}c.done?t(a):Promise.resolve(a).then(r,i)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function s(e){asyncGeneratorStep(o,r,i,s,c,"next",e)}function c(e){asyncGeneratorStep(o,r,i,s,c,"throw",e)}s(void 0)}))}}const FILE_TYPE=Object.freeze({NON_COMPILABLE:"NON_COMPILABLE",COMPILED:"COMPILED",IGNORED:"IGNORED",ERR_COMPILATION:"ERR_COMPILATION"});function outputFileSync(e,t){var n,r;(n=process.versions.node,r="10.12",n=n.split("."),r=r.split("."),+n[0]>+r[0]||n[0]==r[0]&&+n[1]>=+r[1]?_fs().mkdirSync:require("make-dir").sync)(_path().dirname(e),{recursive:!0}),_fs().writeFileSync(e,t)}function _default(e){return _ref.apply(this,arguments)}function _ref(){return _ref=_asyncToGenerator((function*({cliOptions:e,babelOptions:t}){function n(e,t){return r.apply(this,arguments)}function r(){return(r=_asyncToGenerator((function*(n,r){let o=_path().relative(r,n);if(!util.isCompilableExtension(o,e.extensions))return FILE_TYPE.NON_COMPILABLE;o=util.withExtension(o,e.keepFileExtension?_path().extname(o):e.outFileExtension);const s=i(o,r);try{const r=yield util.compile(n,Object.assign({},t,{sourceFileName:_slash()(_path().relative(s+"/..",n))}));if(!r)return FILE_TYPE.IGNORED;if(r.map&&t.sourceMaps&&"inline"!==t.sourceMaps){const e=s+".map";r.code=util.addSourceMappingUrl(r.code,e),r.map.file=_path().basename(o),outputFileSync(e,JSON.stringify(r.map))}return outputFileSync(s,r.code),util.chmod(n,s),e.verbose&&console.log(_path().relative(process.cwd(),n)+" -> "+s),FILE_TYPE.COMPILED}catch(t){if(e.watch)return console.error(t),FILE_TYPE.ERR_COMPILATION;throw t}}))).apply(this,arguments)}function i(t,n){return e.relative?_path().join(n,e.outDir,t):_path().join(e.outDir,t)}function o(e,t){return s.apply(this,arguments)}function s(){return(s=_asyncToGenerator((function*(t,r){const o=yield n(t,r);if(e.copyFiles&&o===FILE_TYPE.NON_COMPILABLE||e.copyIgnored&&o===FILE_TYPE.IGNORED){const e=i(_path().relative(r,t),r);outputFileSync(e,_fs().readFileSync(t)),util.chmod(t,e)}return o===FILE_TYPE.COMPILED}))).apply(this,arguments)}function c(e){return a.apply(this,arguments)}function a(){return(a=_asyncToGenerator((function*(t){if(!_fs().existsSync(t))return 0;if(_fs().statSync(t).isDirectory()){const n=t;let r=0;const i=util.readdir(n,e.includeDotfiles);for(const e of i){const t=_path().join(n,e);(yield o(t,n))&&(r+=1)}return r}{const e=t;return(yield o(e,_path().dirname(e)))?1:0}}))).apply(this,arguments)}let u=0,l=null;const p=util.debounce((function(){if(null===l)return;const e=process.hrtime(l);console.log(`Successfully compiled ${u} ${1!==u?"files":"file"} with Babel (${1e3*e[0]+Math.round(e[1]/1e6)}ms).`),u=0,l=null}),100);if(e.watch&&watcher.enable({enableGlobbing:!0}),!e.skipInitialBuild){e.deleteDirOnStart&&util.deleteDir(e.outDir),(f=process.versions.node,h="10.12",f=f.split("."),h=h.split("."),+f[0]>+h[0]||f[0]==h[0]&&+f[1]>=+h[1]?_fs().mkdirSync:require("make-dir").sync)(e.outDir,{recursive:!0}),l=process.hrtime();for(const t of e.filenames)u+=(yield c(t));e.quiet||(p(),p.flush())}var f,h;if(e.watch){let t=0;const{filenames:n}=e;let r;if(1===n.length){const e=n[0],t=_path().resolve(e);r=n=>n===t?_path().dirname(e):e}else{const e=new Map(n.map((e=>[_path().resolve(e),_path().dirname(e)]))),t=new Map(n.map((e=>[_path().resolve(e),e]))),{sep:i}=_path();r=n=>{const r=e.get(n);if(void 0!==r)return r;for(const[r,o]of t)if(n.startsWith(r+i))return e.set(n,o),o;return""}}n.forEach((e=>{watcher.watch(e)})),watcher.onFilesChange(_asyncToGenerator((function*(n){t++,null===l&&(l=process.hrtime());try{const e=yield Promise.all(n.map((e=>o(e,r(e)))));u+=e.filter(Boolean).length}catch(e){console.error(e)}t--,0!==t||e.quiet||p()})))}})),_ref.apply(this,arguments)}
//# sourceMappingURL=/sm/512a590bee64e147688cb86dbf49c14d5eb03b43d17301bb67ad649a7be837a2.map