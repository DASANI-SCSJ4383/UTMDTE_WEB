/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/browser-sync@2.27.9/dist/snippet.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";var connectUtils=require("./connect-utils"),config=require("./config"),lrSnippet=require("resp-modifier"),path=require("path"),_=require("./lodash.custom"),utils=require("./utils"),fs=require("fs"),snippetUtils=(path=require("path"),{isExcluded:function(e,t){var i=path.extname(e);return!!i&&(!!~e.indexOf("?")||(i=i.slice(1),_.includes(t,i)))},getRegex:function(e,t){var i=t.getIn(["rule","fn"]);return{match:t.getIn(["rule","match"]),fn:function(t,n,r){return i.apply(null,[e,r])},once:!0,id:"bs-snippet"}},getSnippetMiddleware:function(e,t,i){return lrSnippet.create(snippetUtils.getRules(e,t,i))},getRules:function(e,t,i){var n=[snippetUtils.getRegex(e,t)];return i&&(n=n.concat(i)),{rules:n,blacklist:utils.arrayify(t.get("blacklist")),whitelist:utils.arrayify(t.get("whitelist"))}},isOldIe:function(e){return function(t,i,n){var r=t.headers["user-agent"],s=/MSIE (\d)\.\d/.exec(r);s&&parseInt(s[1],10)<9&&(snippetUtils.isExcluded(t.url,e)||(t.headers.accept="text/html")),n()}},getClientJs:function(e,t){return()=>{const e=t.get("minify")?"index.min.js":"index.js",i=fs.readFileSync(require.resolve("browser-sync-client/dist/"+e),"utf8");return[connectUtils.socketConnector(t),i].join(";\n")}}});module.exports.utils=snippetUtils;
//# sourceMappingURL=/sm/5790d9a85429e2f609348b499f4d39e99679e7a7bdaa1aa4e41dcc9de6469f1c.map