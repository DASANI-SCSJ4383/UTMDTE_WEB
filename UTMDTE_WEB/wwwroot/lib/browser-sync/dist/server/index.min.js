/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/browser-sync@2.27.9/dist/server/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";var enableDestroy=require("server-destroy"),_=require("../lodash.custom");function createServer(e){var r=e.options.get("proxy"),t=e.options.get("server");return r||t?r?require("./proxy-server")(e):t?require("./static-server")(e):void 0:require("./snippet-server")(e)}module.exports.plugin=function(e){var r=e.debug,t=e.options.get("proxy"),s=e.options.get("mode"),o=createServer(e);function n(e){Object.keys(e.sockets).forEach((function(r){_.set(e.sockets[r],"conn.transport.socket._closeReceived",!0)}))}return"server"!==s&&"snippet"!==s||r("Static Server running ({magenta:%s}) ...",e.options.get("scheme")),t&&r("Proxy running, proxing: {magenta:%s}",t.get("target")),o&&(enableDestroy(o.server),o.server.listen(e.options.get("port"),e.options.get("listen")),e.registerCleanupTask((function(){e.io&&e.io.sockets&&n(e.io.sockets),e.ui&&e.ui.socket&&n(e.ui.socket)})),e.registerCleanupTask((function(){o.server.destroy()}))),r("Running mode: %s",s.toUpperCase()),{server:o.server,app:o.app}},module.exports.createServer=createServer;
//# sourceMappingURL=/sm/9f0cf215e1533f116a72ca8408ff2ddfee1d581fbf79bc26bd8a942b7be421af.map