/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/browser-sync@2.27.9/dist/server/static-server.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var serverUtils=require("./utils.js"),resolve=require("path").resolve,utils=require("../utils.js"),serveStatic=require("./serve-static-wrapper").default(),serveIndex=require("serve-index");module.exports=function(e){var r=e.options.get("server"),t=utils.arrayify(r.get("baseDir")),i=r.get("serveStaticOptions").toJS(),s=0,o=0;e.options=e.options.update("middleware",(function(e){return r.get("directory")?e.concat({route:"",handle:serveIndex(resolve(t[0]),{icons:!0,view:"details"}),id:"Browsersync Server Directory Middleware"}):e})).update("middleware",(function(e){return e.concat(t.map((function(e){return{route:"",id:"Browsersync Server ServeStatic Middleware - "+s++,handle:serveStatic(resolve(e),i)}})))})).update("middleware",(function(e){return r.get("routes")?e.concat(r.get("routes").map((function(e,r){return"/"===r[r.length-1]&&(r=r.slice(0,-1)),{route:r,id:"Browsersync Server Routes Middleware - "+o++,handle:serveStatic(resolve(e))}}))):e}));var n=serverUtils.getBaseApp(e);return serverUtils.getServer(n,e.options)};
//# sourceMappingURL=/sm/c69d0befd1c4907c7a06c252ea721ae94716f41af92b70c7f2041195ce2e77f8.map