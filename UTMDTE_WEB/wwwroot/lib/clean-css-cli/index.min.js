/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/clean-css-cli@5.5.2/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var fs=require("fs"),path=require("path"),CleanCSS=require("clean-css"),program=require("commander"),glob=require("glob"),COMPATIBILITY_PATTERN=/([\w\.]+)=(\w+)/g,lineBreak=require("os").EOL;function cli(e,o){var n,t,i,s,r=fs.readFileSync(path.join(__dirname,"package.json")),a=JSON.parse(r).version;if(o=o||Function.prototype,program.usage("[options] <source-file ...>").option("-b, --batch","If enabled, optimizes input files one by one instead of joining them together").option("-c, --compatibility [ie7|ie8]","Force compatibility mode (see Readme for advanced examples)").option("-d, --debug","Shows debug information (minification time & compression efficiency)").option("-f, --format <options>","Controls output formatting, see examples below").option("-h, --help","display this help").option("-o, --output [output-file]","Use [output-file] as output instead of STDOUT").option("-O <n> [optimizations]","Turn on level <n> optimizations; optionally accepts a list of fine-grained options, defaults to `1`, see examples below, IMPORTANT: the prefix is O (a capital o letter), NOT a 0 (zero, a number)",(function(e){return Math.abs(parseInt(e))})).version(a,"-v, --version").option("--batch-suffix <suffix>","A suffix (without extension) appended to input file name when processing in batch mode (`-min` is the default)","-min").option("--inline [rules]","Enables inlining for listed sources (defaults to `local`)").option("--inline-timeout [seconds]","Per connection timeout when fetching remote stylesheets (defaults to 5 seconds)",parseFloat).option("--input-source-map [file]","Specifies the path of the input source map file").option("--remove-inlined-files","Remove files inlined in <source-file ...> or via `@import` statements").option("--source-map","Enables building input's source map").option("--source-map-inline-sources","Enables inlining sources inside source maps").option("--with-rebase","Enable URLs rebasing").option("--watch","Runs CLI in watch mode"),program.on("--help",(function(){console.log(""),console.log("Examples:\n"),console.log("  %> cleancss one.css"),console.log("  %> cleancss -o one-min.css one.css"),console.log("  %> cleancss -o merged-and-minified.css one.css two.css three.css"),console.log("  %> cleancss one.css two.css three.css | gzip -9 -c > merged-minified-and-gzipped.css.gz"),console.log(""),console.log("Formatting options:"),console.log("  %> cleancss --format beautify one.css"),console.log("  %> cleancss --format keep-breaks one.css"),console.log("  %> cleancss --format 'indentBy:1;indentWith:tab' one.css"),console.log("  %> cleancss --format 'breaks:afterBlockBegins=on;spaces:aroundSelectorRelation=on' one.css"),console.log("  %> cleancss --format 'breaks:afterBlockBegins=2;spaces:aroundSelectorRelation=on' one.css"),console.log(""),console.log("Level 0 optimizations:"),console.log("  %> cleancss -O0 one.css"),console.log(""),console.log("Level 1 optimizations:"),console.log("  %> cleancss -O1 one.css"),console.log("  %> cleancss -O1 removeQuotes:off;roundingPrecision:4;specialComments:1 one.css"),console.log("  %> cleancss -O1 all:off;specialComments:1 one.css"),console.log(""),console.log("Level 2 optimizations:"),console.log("  %> cleancss -O2 one.css"),console.log("  %> cleancss -O2 mergeMedia:off;restructureRules:off;mergeSemantically:on;mergeIntoShorthands:off one.css"),console.log("  %> cleancss -O2 all:off;removeDuplicateRules:on one.css"),e.exit()})),program.parse(e.argv),n=program.opts(),0===program.args.length&&!(!e.env.__DIRECT__&&!e.stdin.isTTY))return program.outputHelp(),0;t={batch:n.batch,compatibility:n.compatibility,format:n.format,inline:"string"==typeof n.inline?n.inline:"local",inlineTimeout:1e3*n.inlineTimeout,level:{1:!0},output:n.output,rebase:!!n.withRebase,rebaseTo:void 0,sourceMap:n.sourceMap,sourceMapInlineSources:n.sourceMapInlineSources},program.rawArgs.indexOf("-O0")>-1&&(t.level[0]=!0),program.rawArgs.indexOf("-O1")>-1&&(t.level[1]=findArgumentTo("-O1",program.rawArgs,program.args)),program.rawArgs.indexOf("-O2")>-1&&(t.level[2]=findArgumentTo("-O2",program.rawArgs,program.args)),n.inputSourceMap&&!t.sourceMap&&(t.sourceMap=!0),!t.sourceMap||t.output||t.batch||(outputFeedback(["Source maps will not be built because you have not specified an output file."],!0),t.sourceMap=!1),t.output&&t.batch&&fs.mkdirSync(t.output,{recursive:!0}),n.withRebase&&"output"in n&&n.output.length>0?isDirectory(path.resolve(n.output))?t.rebaseTo=path.resolve(n.output):t.rebaseTo=path.dirname(path.resolve(n.output)):n.withRebase&&(t.rebaseTo=e.cwd());var c={batchSuffix:n.batchSuffix,beforeMinifyCallback:o,debugMode:n.debug,removeInlinedFiles:n.removeInlinedFiles,inputSourceMap:n.inputSourceMap};if(program.args.length>0){var l=expandGlobs(program.args);if(n.watch){var u=l.map((function(e){return e.expanded}));minify(e,t,c,l),require("chokidar").watch(u).on("change",(function(o){console.log(`File '${o}' has changed. Rerunning all optimizations...`),minify(e,t,c,l)}))}else minify(e,t,c,l)}else(i=e.openStdin()).setEncoding("utf-8"),s="",i.on("data",(function(e){s+=e})),i.on("end",(function(){minify(e,t,c,s)}))}function isDirectory(e){try{return fs.statSync(e).isDirectory()}catch(e){if("ENOENT"==e.code)return!1;throw e}}function findArgumentTo(e,o,n){var t,i,s=!0,r=o.indexOf(e),a=o[r+1];return a?(t=a.indexOf(".css")>-1||/\//.test(a)||/\\[^\-]/.test(a)||/^https?:\/\//.test(a),i=n.indexOf(a),t||(s=a),!t&&i>-1&&n.splice(i,1),s):s}function expandGlobs(e){var o=e.filter((function(e){return"!"!=e[0]})),n=e.filter((function(e){return"!"==e[0]})).map((function(e){return e.substring(1)}));return o.reduce((function(e,o){var t=glob.sync(o,{ignore:n,nodir:!0,nonull:!0}).map((function(e){return{expanded:e,source:o}}));return e.concat(t)}),[])}function minify(e,o,n,t){var i=new CleanCSS(o),s="string"==typeof t?t:t.map((function(e){return e.expanded}));applyNonBooleanCompatibilityFlags(i,o.compatibility),n.beforeMinifyCallback(i),i.minify(s,getSourceMapContent(n.inputSourceMap),(function(i,s){var r,a;if(o.batch&&!("styles"in s))for(r in s)a=o.batch&&o.output?toBatchOutputPath(r,n.batchSuffix,o.output,t):toSimpleOutputPath(r,n.batchSuffix),processMinified(e,n,s[r],r,a);else processMinified(e,n,s,null,o.output)}))}function toSimpleOutputPath(e,o){var n=path.extname(e);return e.replace(new RegExp(n+"$"),o+n)}function toBatchOutputPath(e,o,n,t){var i=path.extname(e),s=t.find((function(o){return o.expanded==e})).source,r=s.indexOf("*")>-1?s.substring(0,s.indexOf("*")):path.dirname(s);return path.join(n,e.replace(r,"").replace(new RegExp(i+"$"),o+i))}function processMinified(e,o,n,t,i){var s;o.debugMode&&(t&&console.error("File: %s",t),console.error("Original: %d bytes",n.stats.originalSize),console.error("Minified: %d bytes",n.stats.minifiedSize),console.error("Efficiency: %d%",~~(1e4*n.stats.efficiency)/100),console.error("Time spent: %dms",n.stats.timeSpent),n.inlinedStylesheets.length>0&&(console.error("Inlined stylesheets:"),n.inlinedStylesheets.forEach((function(e){console.error("- %s",e)}))),console.error("")),outputFeedback(n.errors,!0),outputFeedback(n.warnings),n.errors.length>0&&e.exit(1),o.removeInlinedFiles&&n.inlinedStylesheets.forEach(fs.unlinkSync),n.sourceMap?(s=i+".map",output(e,i,n.styles+lineBreak+"/*# sourceMappingURL="+path.basename(s)+" */"),outputMap(s,n.sourceMap)):output(e,i,n.styles)}function applyNonBooleanCompatibilityFlags(e,o){var n,t,i,s,r;if(o)e:for(;null!==(n=COMPATIBILITY_PATTERN.exec(o));){for(t=e.options.compatibility,s=0,r=(i=n[1].split(".")).length-1;s<r;s++)if(!(t=t[i[s]]))continue e;t[i.pop()]=n[2]}}function outputFeedback(e,o){var n=o?"[31mERROR[39m:":"WARNING:";e.forEach((function(e){console.error("%s %s",n,e)}))}function getSourceMapContent(e){if(!e||!fs.existsSync(e))return null;var o=null;try{o=fs.readFileSync(e).toString()}catch(e){console.error("Failed to read the input source map file.")}return o}function output(e,o,n){o?(fs.mkdirSync(path.dirname(o),{recursive:!0}),fs.writeFileSync(o,n,"utf8")):e.stdout.write(n)}function outputMap(e,o){fs.writeFileSync(e,o.toString(),"utf-8")}module.exports=cli;
//# sourceMappingURL=/sm/bd84329836645811398d1dae57c40d8c8575f9361450b0eedb498cd5e531a60c.map