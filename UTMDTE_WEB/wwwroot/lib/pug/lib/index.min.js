/**
 * Minified by jsDelivr using Terser v5.3.5.
 * Original file: /npm/pug@3.0.2/lib/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";
/*!
 * Pug
 * Copyright(c) 2010 TJ Holowaychuk <tj@vision-media.ca>
 * MIT Licensed
 */var fs=require("fs"),path=require("path"),lex=require("pug-lexer"),stripComments=require("pug-strip-comments"),parse=require("pug-parser"),load=require("pug-load"),filters=require("pug-filters"),link=require("pug-linker"),generateCode=require("pug-code-gen"),runtime=require("pug-runtime"),runtimeWrap=require("pug-runtime/wrap");function applyPlugins(e,n,r,t){return r.reduce((function(e,r){return r[t]?r[t](e,n):e}),e)}function findReplacementFunc(e,n){var r=e.filter((function(e){return e[n]}));if(r.length>1)throw new Error("Two or more plugins all implement "+n+" method.");return r.length?r[0][n].bind(r[0]):null}function compileBody(e,n){var r={};r[n.filename]=e;var t=[],i=n.plugins||[],l=load.string(e,{filename:n.filename,basedir:n.basedir,lex:function(e,n){var r={};Object.keys(n).forEach((function(e){r[e]=n[e]})),r.plugins=i.filter((function(e){return!!e.lex})).map((function(e){return e.lex}));var t=applyPlugins(e,{filename:n.filename},i,"preLex");return applyPlugins(lex(t,r),n,i,"postLex")},parse:function(e,n){e=e.map((function(e){return"path"===e.type&&""===path.extname(e.val)?{type:"path",loc:e.loc,val:e.val+".pug"}:e})),e=applyPlugins(e=stripComments(e,n),n,i,"preParse");var r={};return Object.keys(n).forEach((function(e){r[e]=n[e]})),r.plugins=i.filter((function(e){return!!e.parse})).map((function(e){return e.parse})),applyPlugins(applyPlugins(parse(e,r),n,i,"postParse"),n,i,"preLoad")},resolve:function(e,r,t){var l=findReplacementFunc(i,"resolve");return l?l(e,r,n):load.resolve(e,r,t)},read:function(e,l){var p;t.push(e);var o=findReplacementFunc(i,"read");return p=o?o(e,n):load.read(e,l),r[e]=Buffer.isBuffer(p)?p.toString("utf8"):p,p}});l=applyPlugins(l,n,i,"postLoad"),l=applyPlugins(l,n,i,"preFilters");var p={};Object.keys(exports.filters).forEach((function(e){p[e]=exports.filters[e]})),n.filters&&Object.keys(n.filters).forEach((function(e){p[e]=n.filters[e]})),l=applyPlugins(l=filters.handleFilters(l,p,n.filterOptions,n.filterAliases),n,i,"postFilters"),l=applyPlugins(l,n,i,"preLink"),l=applyPlugins(l=link(l),n,i,"postLink"),l=applyPlugins(l,n,i,"preCodeGen");var o=(findReplacementFunc(i,"generateCode")||generateCode)(l,{pretty:n.pretty,compileDebug:n.compileDebug,doctype:n.doctype,inlineRuntimeFunctions:n.inlineRuntimeFunctions,globals:n.globals,self:n.self,includeSources:!!n.includeSources&&r,templateName:n.templateName});return o=applyPlugins(o,n,i,"postCodeGen"),n.debug&&console.error("\nCompiled Function:\n\n[90m%s[0m",o.replace(/^/gm,"  ")),{body:o,dependencies:t}}function handleTemplateCache(e,n){var r=e.filename;if(e.cache&&exports.cache[r])return exports.cache[r];void 0===n&&(n=fs.readFileSync(e.filename,"utf8"));var t=exports.compile(n,e);return e.cache&&(exports.cache[r]=t),t}exports.name="Pug",exports.runtime=runtime,exports.cache={},exports.filters={},exports.compile=function(e,n){n=n||{};var r=compileBody(e=String(e),{compileDebug:!1!==n.compileDebug,filename:n.filename,basedir:n.basedir,pretty:n.pretty,doctype:n.doctype,inlineRuntimeFunctions:n.inlineRuntimeFunctions,globals:n.globals,self:n.self,includeSources:!0===n.compileDebug,debug:n.debug,templateName:"template",filters:n.filters,filterOptions:n.filterOptions,filterAliases:n.filterAliases,plugins:n.plugins}),t=n.inlineRuntimeFunctions?new Function("",r.body+";return template;")():runtimeWrap(r.body);return t.dependencies=r.dependencies,t},exports.compileClientWithDependenciesTracked=function(e,n){n=n||{};var r=compileBody(e=String(e),{compileDebug:n.compileDebug,filename:n.filename,basedir:n.basedir,pretty:n.pretty,doctype:n.doctype,inlineRuntimeFunctions:!1!==n.inlineRuntimeFunctions,globals:n.globals,self:n.self,includeSources:n.compileDebug,debug:n.debug,templateName:n.name||"template",filters:n.filters,filterOptions:n.filterOptions,filterAliases:n.filterAliases,plugins:n.plugins}),t=r.body;return n.module&&(!1===n.inlineRuntimeFunctions&&(t='var pug = require("pug-runtime");'+t),t+=" module.exports = "+(n.name||"template")+";"),{body:t,dependencies:r.dependencies}},exports.compileClient=function(e,n){return exports.compileClientWithDependenciesTracked(e,n).body},exports.compileFile=function(e,n){return(n=n||{}).filename=e,handleTemplateCache(n)},exports.render=function(e,n,r){if("function"==typeof n&&(r=n,n=void 0),"function"==typeof r){var t;try{t=exports.render(e,n)}catch(e){return r(e)}return r(null,t)}if((n=n||{}).cache&&!n.filename)throw new Error('the "filename" option is required for caching');return handleTemplateCache(n,e)(n)},exports.renderFile=function(e,n,r){if("function"==typeof n&&(r=n,n=void 0),"function"==typeof r){var t;try{t=exports.renderFile(e,n)}catch(e){return r(e)}return r(null,t)}return(n=n||{}).filename=e,handleTemplateCache(n)(n)},exports.compileFileClient=function(e,n){var r=e+":client";if((n=n||{}).filename=e,n.cache&&exports.cache[r])return exports.cache[r];var t=fs.readFileSync(n.filename,"utf8"),i=exports.compileClient(t,n);return n.cache&&(exports.cache[r]=i),i},exports.__express=function(e,n,r){null==n.compileDebug&&"production"===process.env.NODE_ENV&&(n.compileDebug=!1),exports.renderFile(e,n,r)};
//# sourceMappingURL=/sm/275427ac6b3209d30d35611555e393a027843730845af7763fa2708f4a476d20.map